# Panel Insight í”„ë¡œì íŠ¸ ì¤‘ê°„ë³´ê³ ì„œ

## 1. í”„ë¡œì íŠ¸ ìˆ˜í–‰ ë‚´ìš© ë° ê²°ê³¼

### 1.1 í”„ë¡œì íŠ¸ ê°œìš”

**Panel Insight**ëŠ” íŒ¨ë„ ë°ì´í„°ì˜ ê²€ìƒ‰, í´ëŸ¬ìŠ¤í„°ë§, ë¹„êµ ë¶„ì„ì„ ì œê³µí•˜ëŠ” ì›¹ ê¸°ë°˜ ë¶„ì„ í”Œë«í¼ì…ë‹ˆë‹¤. ìì—°ì–´ ê¸°ë°˜ ì˜ë¯¸ ê²€ìƒ‰, ê³ ê¸‰ í•„í„°ë§, í´ëŸ¬ìŠ¤í„° ë¶„ì„, ê·¸ë£¹ ë¹„êµ ê¸°ëŠ¥ì„ í†µí•´ ëŒ€ëŸ‰ì˜ íŒ¨ë„ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ íƒìƒ‰í•˜ê³  ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 1.2 ê¸°ìˆ  ìŠ¤íƒ

**í”„ë¡ íŠ¸ì—”ë“œ:**
- React 18 (TypeScript)
- Vite (ë¹Œë“œ ë„êµ¬)
- Tailwind CSS (ìŠ¤íƒ€ì¼ë§)
- Radix UI (ì»´í¬ë„ŒíŠ¸)
- Recharts (ë°ì´í„° ì‹œê°í™”)
- Lucide React (ì•„ì´ì½˜)

**ë°±ì—”ë“œ:**
- FastAPI (Python 3.13)
- PostgreSQL with pgvector (ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤)
- SQLAlchemy (ë¹„ë™ê¸° ORM)
- HuggingFace Sentence-Transformers (ì„ë² ë”© ìƒì„±)
- Scikit-learn (í´ëŸ¬ìŠ¤í„°ë§)
- UMAP-learn (ì°¨ì› ì¶•ì†Œ)
- NumPy, Pandas (ë°ì´í„° ì²˜ë¦¬)

### 1.3 ì£¼ìš” ì„±ê³¼

- âœ… ë²¡í„° ê¸°ë°˜ ì˜ë¯¸ ê²€ìƒ‰ ì‹œìŠ¤í…œ êµ¬ì¶•
- âœ… ë¹„ë™ê¸° FastAPI ë°±ì—”ë“œ ì•„í‚¤í…ì²˜ êµ¬í˜„
- âœ… React ê¸°ë°˜ í˜„ëŒ€ì ì¸ UI/UX ì„¤ê³„
- âœ… í´ëŸ¬ìŠ¤í„°ë§ ë° ë¹„êµ ë¶„ì„ ê¸°ëŠ¥ ì„¤ê³„
- âœ… ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„ ë° ìµœì í™”

---

## 3.1 ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 3.1.1 ì „ì²´ ì•„í‚¤í…ì²˜

ë³¸ ì‹œìŠ¤í…œì€ **í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ ë¶„ë¦¬ ì•„í‚¤í…ì²˜**ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         HTTP/REST API        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚                 â”‚
â”‚  React Client   â”‚                               â”‚  FastAPI Server â”‚
â”‚  (TypeScript)   â”‚                               â”‚  (Python)       â”‚
â”‚                 â”‚                               â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                           â”‚
                                                           â”‚ SQLAlchemy
                                                           â”‚ (Async)
                                                           â–¼
                                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                   â”‚   PostgreSQL    â”‚
                                                   â”‚  + pgvector     â”‚
                                                   â”‚                 â”‚
                                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.1.2 ë°±ì—”ë“œ ì•„í‚¤í…ì²˜

ë°±ì—”ë“œëŠ” **ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜(Layered Architecture)** íŒ¨í„´ì„ ë”°ë¦…ë‹ˆë‹¤:

```
server/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py              # FastAPI ì•± ì§„ì…ì 
â”‚   â”œâ”€â”€ api/                  # API ë¼ìš°í„° ë ˆì´ì–´
â”‚   â”‚   â”œâ”€â”€ search.py         # ë²¡í„° ê²€ìƒ‰ API
â”‚   â”‚   â”œâ”€â”€ search_rag.py     # RAG ê²€ìƒ‰ API (í”Œë ˆì´ìŠ¤í™€ë”)
â”‚   â”‚   â”œâ”€â”€ panels.py         # íŒ¨ë„ ìƒì„¸ API
â”‚   â”‚   â”œâ”€â”€ clustering.py     # í´ëŸ¬ìŠ¤í„°ë§ API
â”‚   â”‚   â””â”€â”€ health.py         # Health check API
â”‚   â”œâ”€â”€ db/                   # ë°ì´í„° ì ‘ê·¼ ë ˆì´ì–´ (DAO)
â”‚   â”‚   â”œâ”€â”€ session.py        # ë¹„ë™ê¸° DB ì„¸ì…˜ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ dao_panels.py     # íŒ¨ë„ ë°ì´í„° ì ‘ê·¼
â”‚   â”‚   â””â”€â”€ dao_embeddings.py # ì„ë² ë”© ê²€ìƒ‰ ì ‘ê·¼
â”‚   â”œâ”€â”€ clustering/           # í´ëŸ¬ìŠ¤í„°ë§ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ feature_pipeline.py  # í”¼ì²˜ ì „ì²˜ë¦¬
â”‚   â”‚   â”œâ”€â”€ compare.py          # ê·¸ë£¹ ë¹„êµ (SMD, JSD)
â”‚   â”‚   â””â”€â”€ artifacts.py         # ì„¸ì…˜ ì•„í‹°íŒ©íŠ¸ ê´€ë¦¬
â”‚   â”œâ”€â”€ embeddings.py         # ì„ë² ë”© ìƒì„± ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ core/                 # ê³µí†µ ì„¤ì •
â”‚   â”‚   â””â”€â”€ config.py         # DB ìŠ¤í‚¤ë§ˆ ì„¤ì •
â”‚   â””â”€â”€ schemas.py            # Pydantic ìŠ¤í‚¤ë§ˆ
```

### 3.1.3 í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜

í”„ë¡ íŠ¸ì—”ë“œëŠ” **ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜**ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤:

```
src/
â”œâ”€â”€ App.tsx                   # ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ pages/                # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ StartPage.tsx     # ë©”ì¸ ê²€ìƒ‰ í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ ResultsPage.tsx   # ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ ClusterLabPage.tsx # í´ëŸ¬ìŠ¤í„° ë¶„ì„ í˜ì´ì§€
â”‚   â”‚   â””â”€â”€ ComparePage.tsx   # ë¹„êµ ë¶„ì„ í˜ì´ì§€
â”‚   â”œâ”€â”€ drawers/              # ë“œë¡œì–´/ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ FilterDrawer.tsx
â”‚   â”‚   â”œâ”€â”€ PanelDetailDrawer.tsx
â”‚   â”‚   â””â”€â”€ ExportDrawer.tsx
â”‚   â”œâ”€â”€ pi/                   # Panel Insight ì „ìš© ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ PIButton.tsx
â”‚   â”‚   â”œâ”€â”€ PICard.tsx
â”‚   â”‚   â”œâ”€â”€ PIClusterBadge.tsx
â”‚   â”‚   â””â”€â”€ ... (ê¸°íƒ€ PI ì»´í¬ë„ŒíŠ¸)
â”‚   â””â”€â”€ ui/                   # ê³µí†µ UI ì»´í¬ë„ŒíŠ¸ (Radix UI)
â”‚       â”œâ”€â”€ button.tsx
â”‚       â”œâ”€â”€ dialog.tsx
â”‚       â””â”€â”€ ... (ê¸°íƒ€ UI ì»´í¬ë„ŒíŠ¸)
â”œâ”€â”€ lib/                      # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ config.ts             # API ì„¤ì •
â”‚   â”œâ”€â”€ utils.ts              # ê³µí†µ í•¨ìˆ˜
â”‚   â””â”€â”€ history.ts            # íˆìŠ¤í† ë¦¬ ê´€ë¦¬
â””â”€â”€ types/                    # TypeScript íƒ€ì… ì •ì˜
    â””â”€â”€ history.ts
```

### 3.1.4 ë°ì´í„° íë¦„

#### ê²€ìƒ‰ íë¦„:
```
ì‚¬ìš©ì ì…ë ¥ (ìì—°ì–´)
  â†“
React Client â†’ POST /api/search
  â†“
FastAPI Router â†’ search_panels_by_embedding()
  â†“
HuggingFace Model â†’ ì„ë² ë”© ìƒì„± (768ì°¨ì›)
  â†“
PostgreSQL (pgvector) â†’ ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê²€ìƒ‰
  â†“
ê²°ê³¼ ë°˜í™˜ (JSON)
```

#### í´ëŸ¬ìŠ¤í„°ë§ íë¦„:
```
íŒ¨ë„ ID ë¦¬ìŠ¤íŠ¸
  â†“
POST /api/clustering/run
  â†“
í”¼ì²˜ ì¶”ì¶œ â†’ ì „ì²˜ë¦¬ (ì •ê·œí™”, PCA)
  â†“
K-Means/HDBSCAN ì‹¤í–‰
  â†“
ì„¸ì…˜ ì•„í‹°íŒ©íŠ¸ ì €ì¥
  â†“
ê²°ê³¼ ë°˜í™˜ (í´ëŸ¬ìŠ¤í„° ë¼ë²¨, í‰ê°€ ì§€í‘œ)
```

---

## 3.2 ê¸°ëŠ¥ ì„¤ê³„

### 3.2.1 ê²€ìƒ‰ ê¸°ëŠ¥

#### 3.2.1.1 ë²¡í„° ê¸°ë°˜ ì˜ë¯¸ ê²€ìƒ‰

- **ê¸°ëŠ¥**: ìì—°ì–´ ì¿¼ë¦¬ë¥¼ ë²¡í„°ë¡œ ë³€í™˜í•˜ì—¬ ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰
- **ëª¨ë¸**: `intfloat/multilingual-e5-base` (768ì°¨ì›)
- **ë°©ì‹**:
  1. ì‚¬ìš©ì ì…ë ¥ í…ìŠ¤íŠ¸ë¥¼ 768ì°¨ì› ë²¡í„°ë¡œ ë³€í™˜
  2. pgvectorë¥¼ ì´ìš©í•œ ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê²€ìƒ‰
  3. ìœ ì‚¬ë„ 0.9 ì´ìƒ ê²°ê³¼ë§Œ í•„í„°ë§
- **API**: `POST /api/search`
- **ìš”ì²­ í˜•ì‹**:
  ```json
  {
    "query": "ì„œìš¸ ê±°ì£¼ ì»¤í”¼ ì¢‹ì•„í•˜ëŠ” íŒ¨ë„",
    "filters": {
      "selectedGenders": ["F"],
      "selectedRegions": ["ì„œìš¸"]
    },
    "page": 1,
    "limit": 20
  }
  ```

#### 3.2.1.2 í•„í„°ë§ ê¸°ëŠ¥

- **ì§€ì› í•„í„°**:
  - ì„±ë³„ (ì—¬ì„±/ë‚¨ì„±) - ì²´í¬ë°•ìŠ¤ ë‹¤ì¤‘ ì„ íƒ
  - ì§€ì—­ (ë‹¤ì¤‘ ì„ íƒ) - ì²´í¬ë°•ìŠ¤ ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ
  - ë‚˜ì´ ë²”ìœ„ - ìŠ¬ë¼ì´ë” (15ì„¸~80ì„¸)
  - ì†Œë“ ë²”ìœ„ (ë§Œì›) - ì²´í¬ë°•ìŠ¤ (ì˜ˆ: ~200, 200~300, 300~400 ë“±)
  - í€µí´ ì‘ë‹µ ë³´ìœ  ì—¬ë¶€ - í† ê¸€ ìŠ¤ìœ„ì¹˜
- **ì¡°í•©**: ì—¬ëŸ¬ í•„í„°ë¥¼ ë™ì‹œì— ì ìš© ê°€ëŠ¥

##### í•„í„° êµ¬í˜„ ìƒì„¸

**1. í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ (FilterDrawer.tsx)**

- **UI êµ¬ì„±**:
  - ì²´í¬ë°•ìŠ¤ ê¸°ë°˜ í•„í„° ì¸í„°í˜ì´ìŠ¤
  - ê° í•„í„°ëŠ” ë…ë¦½ì ì¸ ìƒíƒœ ê´€ë¦¬ (`useState`)
  - í•„í„° ì ìš© ì‹œ ê°ì²´ë¡œ ì •ë¦¬í•˜ì—¬ API ì „ë‹¬

- **í•„í„° ê°ì²´ êµ¬ì¡°**:
  ```typescript
  {
    selectedGenders: string[],      // ["ì—¬ì„±", "ë‚¨ì„±"]
    selectedRegions: string[],       // ["ì„œìš¸", "ê²½ê¸°", ...]
    selectedIncomes: string[],       // ["200~300", "300~400", ...]
    ageRange: [number, number],     // [20, 39]
    quickpollOnly: boolean          // true/false
  }
  ```

- **ìƒíƒœ ê´€ë¦¬**:
  - ì²´í¬ë°•ìŠ¤ í´ë¦­ ì‹œ ë°°ì—´ì— ì¶”ê°€/ì œê±°
  - ìŠ¬ë¼ì´ë” ê°’ì€ ë°°ì—´ë¡œ ê´€ë¦¬ `[min, max]`
  - í•„í„° ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ ìƒíƒœ ì—…ë°ì´íŠ¸

- **ë°ì´í„° íë¦„**:
  ```
  ì‚¬ìš©ì ì²´í¬ë°•ìŠ¤ í´ë¦­
    â†“
  FilterDrawer ìƒíƒœ ì—…ë°ì´íŠ¸
    â†“
  "ì ìš©í•˜ê³  ê²€ìƒ‰" ë²„íŠ¼ í´ë¦­
    â†“
  onApply ì½œë°± í˜¸ì¶œ (í•„í„° ê°ì²´ ì „ë‹¬)
    â†“
  ResultsPageì—ì„œ API í˜¸ì¶œ ì‹œ í•„í„° í¬í•¨
  ```

**2. ë°±ì—”ë“œ êµ¬í˜„ (search.py)**

- **í•„í„° ìˆ˜ì‹  ë° íŒŒì‹±**:
  ```python
  filters_dict = payload.get("filters") or {}
  
  vector_filters = {}
  if filters_dict.get("selectedGenders"):
      vector_filters["gender"] = filters_dict["selectedGenders"]
  if filters_dict.get("selectedRegions"):
      vector_filters["region"] = filters_dict["selectedRegions"]
  if filters_dict.get("ageRange"):
      vector_filters["age_min"] = filters_dict["ageRange"][0]
      vector_filters["age_max"] = filters_dict["ageRange"][1]
  if filters_dict.get("selectedIncomes"):
      vector_filters["income"] = filters_dict["selectedIncomes"]
  if filters_dict.get("quickpollOnly"):
      vector_filters["quickpoll_only"] = filters_dict["quickpollOnly"]
  ```

- **í•„í„° ì ìš© ì „ëµ**:
  
  **1ë‹¨ê³„: ë²¡í„° ê²€ìƒ‰ (SQL ë ˆë²¨ í•„í„°ë§)**
  - ì„±ë³„, ì§€ì—­: `demographics` JSONB í•„ë“œì—ì„œ ì§ì ‘ í•„í„°ë§
  - SQL WHERE ì ˆì— íŒŒë¼ë¯¸í„° ë°”ì¸ë”©ìœ¼ë¡œ ì¶”ê°€
  - ì„±ëŠ¥ ìµœì í™”: ì¸ë±ìŠ¤ í™œìš© ê°€ëŠ¥
  
  **2ë‹¨ê³„: ë²¡í„° ê²€ìƒ‰ í›„ í•„í„°ë§ (Python ë ˆë²¨)**
  - ë‚˜ì´, ì†Œë“, í€µí´: RawData í…Œì´ë¸”ê³¼ JOIN í•„ìš”
  - ë²¡í„° ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë°›ì€ í›„ RawData í…Œì´ë¸”ì—ì„œ ì •ë³´ ì¡°íšŒ
  - Pythonì—ì„œ í•„í„° ì¡°ê±´ì— ë§ëŠ” ê²°ê³¼ë§Œ í•„í„°ë§

- **ì†Œë“ í•„í„° ì²˜ë¦¬**:
  ```python
  # ì†Œë“ ë²”ìœ„ ë¬¸ìì—´ íŒŒì‹± (ì˜ˆ: "200~300" â†’ 2000000~3000000)
  for income_range_str in income_ranges:
      if "~" in income_range_str:
          # "200~300" í˜•íƒœ
          min_income = int(parts[0]) * 10000  # ë§Œì› â†’ ì›
          max_income = int(parts[1]) * 10000
      elif income_range_str.startswith("~"):
          # "~200" í˜•íƒœ (200ë§Œì› ì´í•˜)
      elif income_range_str.endswith("~"):
          # "600~" í˜•íƒœ (600ë§Œì› ì´ìƒ)
  ```

**3. ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ìµœì í™”**

- **ë²¡í„° ê²€ìƒ‰ ë‹¨ê³„ (dao_embeddings.py)**:
  - ì„±ë³„/ì§€ì—­ í•„í„°ëŠ” SQL WHERE ì ˆì— ì§ì ‘ ì¶”ê°€
  - íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì‚¬ìš©ìœ¼ë¡œ SQL ì¸ì ì…˜ ë°©ì§€
  - JSONB í•„ë“œì—ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ê²€ìƒ‰
  
  ```sql
  -- ì„±ë³„ í•„í„° ì˜ˆì‹œ
  AND (demographics->>'gender' = :g1 
       OR demographics->>'gender' = :g2 
       OR LOWER(COALESCE(demographics->>'gender', '')) = :g3)
  ```

- **RawData JOIN ë‹¨ê³„ (search.py)**:
  - ë‚˜ì´/ì†Œë“/í€µí´ í•„í„°ëŠ” ë²¡í„° ê²€ìƒ‰ í›„ ì ìš©
  - ë²¡í„° ê²€ìƒ‰ ê²°ê³¼ì˜ mb_sn ë¦¬ìŠ¤íŠ¸ë¡œ RawData ì¡°íšŒ
  - í•„ìš”í•œ ì •ë³´ë§Œ ì„ íƒì ìœ¼ë¡œ JOIN
  
  ```sql
  SELECT 
      w1.mb_sn,
      EXTRACT(YEAR FROM AGE(...))::int AS age_raw,
      (w2."data"->>'income_personal')::numeric AS income_personal,
      (w2."data"->>'income_household')::numeric AS income_household,
      CASE WHEN qa.mb_sn IS NOT NULL THEN true ELSE false END AS has_quickpoll
  FROM welcome_1st w1
  LEFT JOIN welcome_2nd w2 ON w1.mb_sn = w2.mb_sn
  LEFT JOIN quick_answer qa ON w1.mb_sn = qa.mb_sn
  WHERE w1.mb_sn = ANY(:mb_sn_list)
  ```

**4. ë³´ì•ˆ ë° ì•ˆì „ì„±**

- **SQL ì¸ì ì…˜ ë°©ì§€**:
  - ëª¨ë“  í•„í„° ê°’ì€ íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì‚¬ìš©
  - SQL ì¿¼ë¦¬ì— ì§ì ‘ ë¬¸ìì—´ ì‚½ì…í•˜ì§€ ì•ŠìŒ
  - `text()` í•¨ìˆ˜ì™€ íŒŒë¼ë¯¸í„° ë”•ì…”ë„ˆë¦¬ ì‚¬ìš©

- **ë°ì´í„° ê²€ì¦**:
  - í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í•„í„° ê°’ íƒ€ì… ê²€ì¦
  - ë°±ì—”ë“œì—ì„œ í•„í„° ê°ì²´ êµ¬ì¡° ê²€ì¦
  - ì˜ëª»ëœ ê°’ì€ ê¸°ë³¸ê°’ìœ¼ë¡œ ì²˜ë¦¬

**5. ì„±ëŠ¥ ìµœì í™”**

- **2ë‹¨ê³„ í•„í„°ë§ ì „ëµ**:
  1. ë²¡í„° ê²€ìƒ‰ ì‹œ ê°€ëŠ¥í•œ í•„í„°ëŠ” SQL ë ˆë²¨ì—ì„œ ì ìš© (ì„±ë³„, ì§€ì—­)
  2. ë²¡í„° ê²€ìƒ‰ í›„ ë‚˜ì´/ì†Œë“/í€µí´ í•„í„°ëŠ” Pythonì—ì„œ ì ìš©
  3. ì´ìœ : ë²¡í„° ê²€ìƒ‰ ê²°ê³¼ê°€ ë§ì§€ ì•Šìœ¼ë¯€ë¡œ (200ê°œ ì œí•œ) Python í•„í„°ë§ì´ íš¨ìœ¨ì 

- **ì¸ë±ìŠ¤ í™œìš©**:
  - `demographics` JSONB í•„ë“œì˜ GIN ì¸ë±ìŠ¤
  - `welcome_1st` í…Œì´ë¸”ì˜ `mb_sn`, `gender`, `location` ì¸ë±ìŠ¤
  - `welcome_2nd` í…Œì´ë¸”ì˜ `mb_sn` ì¸ë±ìŠ¤

**6. ì‚¬ìš©ì ê²½í—˜**

- **ì‹¤ì‹œê°„ í”¼ë“œë°±**:
  - í•„í„° ì ìš© ì‹œ ì¦‰ì‹œ ê²€ìƒ‰ ê²°ê³¼ ê°±ì‹ 
  - í•„í„° ìƒíƒœê°€ URLì´ë‚˜ ìƒíƒœë¡œ ìœ ì§€
  - í•„í„° ì´ˆê¸°í™” ê¸°ëŠ¥ ì œê³µ

- **ì‹œê°ì  í‘œì‹œ**:
  - ì ìš©ëœ í•„í„°ë¥¼ ì¹© í˜•íƒœë¡œ í‘œì‹œ
  - í•„í„° ë“œë¡œì–´ì— í˜„ì¬ í•„í„° ìƒíƒœ í‘œì‹œ
  - í•„í„° ê²°ê³¼ ìˆ˜ í‘œì‹œ

**7. í™•ì¥ì„±**

- **ìƒˆ í•„í„° ì¶”ê°€ ë°©ë²•**:
  1. FilterDrawerì— UI ì»´í¬ë„ŒíŠ¸ ì¶”ê°€ (ì²´í¬ë°•ìŠ¤/ìŠ¬ë¼ì´ë” ë“±)
  2. í•„í„° ìƒíƒœ ê´€ë¦¬ ì¶”ê°€ (`useState`)
  3. í•„í„° ê°ì²´ì— ìƒˆ í•„ë“œ ì¶”ê°€
  4. ë°±ì—”ë“œì—ì„œ í•„í„° íŒŒì‹± ë¡œì§ ì¶”ê°€
  5. ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ì— í•„í„° ì¡°ê±´ ì¶”ê°€

- **í•„í„° íƒ€ì…ë³„ ì²˜ë¦¬**:
  - **ë²”ì£¼í˜• í•„í„°** (ì„±ë³„, ì§€ì—­): SQL IN ì ˆ ë˜ëŠ” OR ì¡°ê±´
  - **ë²”ìœ„ í•„í„°** (ë‚˜ì´): SQL BETWEEN ë˜ëŠ” >=, <=
  - **ë³µí•© ë²”ìœ„ í•„í„°** (ì†Œë“): Pythonì—ì„œ ë¬¸ìì—´ íŒŒì‹± í›„ ë²”ìœ„ ì²´í¬
  - **ë¶ˆë¦° í•„í„°** (í€µí´): JOIN ê²°ê³¼ë¡œ ì¡´ì¬ ì—¬ë¶€ í™•ì¸

### 3.2.2 í´ëŸ¬ìŠ¤í„°ë§ ê¸°ëŠ¥

#### 3.2.2.1 í´ëŸ¬ìŠ¤í„°ë§ ì•Œê³ ë¦¬ì¦˜

- **ì•Œê³ ë¦¬ì¦˜**: K-Means (ê¸°ë³¸), HDBSCAN (ì˜µì…˜)
- **ì „ì²˜ë¦¬**:
  - êµ¬í˜• ì •ê·œí™” (Spherical Normalization)
  - í‚¤ì›Œë“œ PCA (ì„ íƒì )
  - ë²”ì£¼í˜• ì¸ì½”ë”©
- **í‰ê°€ ì§€í‘œ**:
  - Silhouette Score
  - Calinski-Harabasz Index
  - Davies-Bouldin Index

#### 3.2.2.2 ì„¸ì…˜ ê´€ë¦¬

- **ì„¸ì…˜ ID ê¸°ë°˜ ì €ì¥**: í´ëŸ¬ìŠ¤í„°ë§ ê²°ê³¼ë¥¼ ì„¸ì…˜ìœ¼ë¡œ ì €ì¥
- **ì¬ì‚¬ìš©**: ì €ì¥ëœ ì„¸ì…˜ì„ í†µí•´ ê²°ê³¼ ì¬ì‚¬ìš© ë° ë¹„êµ ë¶„ì„

### 3.2.3 ë¹„êµ ë¶„ì„ ê¸°ëŠ¥

#### 3.2.3.1 ê·¸ë£¹ ë¹„êµ

- **ë¹„êµ ì§€í‘œ**:
  - **ì—°ì†í˜• í”¼ì²˜**: SMD (Standardized Mean Difference)
  - **ë²”ì£¼/ì´ì§„ í”¼ì²˜**: JSD (Jensen-Shannon Divergence)
- **ì •ë ¬ ê·œì¹™**:
  - ì—°ì†í˜•: |SMD| ë‚´ë¦¼ì°¨ìˆœ
  - ë²”ì£¼í˜•: JSD ë‚´ë¦¼ì°¨ìˆœ
- **API**: `POST /api/clustering/compare`

### 3.2.4 ì‹œê°í™” ê¸°ëŠ¥

#### 3.2.4.1 UMAP ì‹œê°í™”

- **ëª©ì **: ê³ ì°¨ì› í´ëŸ¬ìŠ¤í„°ë§ ê²°ê³¼ë¥¼ 2Dë¡œ ì‹œê°í™”
- **ë©”íŠ¸ë¦­**: cosine, euclidean, manhattan
- **ìƒ˜í”Œë§**: ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì˜µì…˜
- **API**: `POST /api/clustering/umap`

### 3.2.5 íŒ¨ë„ ìƒì„¸ ì¡°íšŒ

- **ê¸°ëŠ¥**: ê°œë³„ íŒ¨ë„ì˜ ìƒì„¸ ì •ë³´ ì¡°íšŒ
- **ì •ë³´ í¬í•¨**:
  - ê¸°ë³¸ ì¸êµ¬í†µê³„ (ì„±ë³„, ë‚˜ì´, ì§€ì—­)
  - ì‘ë‹µ ì´ë ¥ (JSONB)
  - íƒœê·¸ ë° ì¹´í…Œê³ ë¦¬
  - AI ìš”ì•½
- **API**: `GET /api/panels/{panel_id}`

---

## 3.3 í™”ë©´ ì„¤ê³„

### 3.3.1 ë©”ì¸ ê²€ìƒ‰ í˜ì´ì§€ (StartPage)

**ê¸°ëŠ¥:**
- ìì—°ì–´ ê²€ìƒ‰ ì…ë ¥ í•„ë“œ
- ë¹ ë¥¸ ì•¡ì…˜ ì¹© (Quick Action Chips)
- í”„ë¦¬ì…‹ ë©”ë‰´ (ìì£¼ ì‚¬ìš©í•˜ëŠ” í•„í„° ì¡°í•©)
- ë¶ë§ˆí¬ ë©”ë‰´
- ëª…ë ¹ íŒ”ë ˆíŠ¸ (Cmd+K)

**UI ìš”ì†Œ:**
- ì¤‘ì•™ ì§‘ì¤‘í˜• ë ˆì´ì•„ì›ƒ
- ê·¸ë¼ë°ì´ì…˜ ë°°ê²½
- í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì§€ì› (/, Cmd+K)

### 3.3.2 ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€ (ResultsPage)

**ê¸°ëŠ¥:**
- ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ (í…Œì´ë¸”/ì¹´ë“œ ë·°)
- í˜ì´ì§€ë„¤ì´ì…˜
- í•„í„° ë“œë¡œì–´
- íŒ¨ë„ ìƒì„¸ ë³´ê¸°
- ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥

**UI ìš”ì†Œ:**
- ê²°ê³¼ ì¹´ìš´íŠ¸ í‘œì‹œ
- ì •ë ¬ ì˜µì…˜
- ë·° ì „í™˜ (í…Œì´ë¸”/ì¹´ë“œ)
- ë¹ ë¥¸ í•„í„° ì¹©

### 3.3.3 í´ëŸ¬ìŠ¤í„° ë¶„ì„ í˜ì´ì§€ (ClusterLabPage)

**ê¸°ëŠ¥:**
- UMAP 2D ì‹œê°í™”
- í´ëŸ¬ìŠ¤í„° í’ˆì§ˆ ì§€í‘œ í‘œì‹œ
- í´ëŸ¬ìŠ¤í„° í”„ë¡œí•„ ì¹´ë“œ
- í´ëŸ¬ìŠ¤í„° í•„í„°ë§
- íŒ¨ë„ ìœ„ì¹˜ ì°¾ê¸° ê¸°ëŠ¥

**UI ìš”ì†Œ:**
- ì¸í„°ë™í‹°ë¸Œ ì°¨íŠ¸
- í’ˆì§ˆ ì§€í‘œ ì¹´ë“œ (Silhouette, CH, DB)
- í´ëŸ¬ìŠ¤í„° ë±ƒì§€
- ë²”ë¡€ ë° ì»¨íŠ¸ë¡¤

### 3.3.4 ë¹„êµ ë¶„ì„ í˜ì´ì§€ (ComparePage)

**ê¸°ëŠ¥:**
- ê·¸ë£¹ ì„ íƒ (í´ëŸ¬ìŠ¤í„° ë˜ëŠ” ì„¸ê·¸ë¨¼íŠ¸)
- ë¹„êµ ê²°ê³¼ í‘œì‹œ
- ì°¨íŠ¸ ì‹œê°í™”
- ë‚´ë³´ë‚´ê¸° (CSV, PNG)

**UI ìš”ì†Œ:**
- ê·¸ë£¹ ì„ íƒ ëª¨ë‹¬
- ë¹„êµ í…Œì´ë¸”
- ì°¨íŠ¸ (Bar, Line)
- í•˜ì´ë¼ì´íŠ¸ (ì°¨ì´ í° í•­ëª©)

### 3.3.5 íŒ¨ë„ ìƒì„¸ ë“œë¡œì–´ (PanelDetailDrawer)

**ê¸°ëŠ¥:**
- íŒ¨ë„ ê¸°ë³¸ ì •ë³´
- ì‘ë‹µ ì´ë ¥ íƒ€ì„ë¼ì¸
- íƒœê·¸ ë° ì¹´í…Œê³ ë¦¬
- AI ìš”ì•½
- ê´€ë ¨ íŒ¨ë„ ì¶”ì²œ

**UI ìš”ì†Œ:**
- íƒ­ ë„¤ë¹„ê²Œì´ì…˜
- íƒ€ì„ë¼ì¸ ë·°
- íƒœê·¸ ì¹©
- ê´€ë ¨ íŒ¨ë„ ë¦¬ìŠ¤íŠ¸

---

## 3.4 ë°ì´í„° ì„¤ê³„

### 3.4.1 ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

#### 3.4.1.1 RawData ìŠ¤í‚¤ë§ˆ

**welcome_1st í…Œì´ë¸”** (ê¸°ë³¸ ì¸êµ¬í†µê³„):
- `mb_sn` (PK): íŒ¨ë„ ID
- `gender`: ì„±ë³„
- `birth_year`: ì¶œìƒë…„ë„
- `location`: ì§€ì—­
- `detail_location`: ìƒì„¸ ì§€ì—­
- ê¸°íƒ€ ì¸êµ¬í†µê³„ í•„ë“œ

**welcome_2nd í…Œì´ë¸”** (ìƒì„¸ ì‘ë‹µ):
- `mb_sn` (FK): íŒ¨ë„ ID
- `data` (JSONB): ìƒì„¸ ì‘ë‹µ ë°ì´í„°

**quick_answer í…Œì´ë¸”** (ë¹ ë¥¸ ì‘ë‹µ):
- `mb_sn` (FK): íŒ¨ë„ ID
- `answers` (JSONB): ë¹ ë¥¸ ì‘ë‹µ ë°ì´í„°

#### 3.4.1.2 testcl ìŠ¤í‚¤ë§ˆ

**panel_embeddings í…Œì´ë¸”**:
- `mb_sn` (PK): íŒ¨ë„ ID
- `demographics` (JSONB): ì¸êµ¬í†µê³„ ì •ë³´
- `combined_text`: ê²°í•©ëœ í…ìŠ¤íŠ¸
- `labeled_text`: ë¼ë²¨ë§ëœ í…ìŠ¤íŠ¸
- `chunks` (JSONB): í…ìŠ¤íŠ¸ ì²­í¬
- `chunk_count`: ì²­í¬ ê°œìˆ˜
- `categories` (JSONB): ì¹´í…Œê³ ë¦¬
- `all_labels` (JSONB): ëª¨ë“  ë¼ë²¨
- `embedding` (VECTOR(768)): ì„ë² ë”© ë²¡í„°
- `created_at`: ìƒì„± ì‹œê°„

#### 3.4.1.3 ë·° (View)

**panel_embeddings_v ë·°**:
- `testcl.panel_embeddings`ë¥¼ `RawData` ìŠ¤í‚¤ë§ˆì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ í•˜ëŠ” ë¸Œë¦¿ì§€ ë·°
- ìŠ¤í‚¤ë§ˆ ê°„ ì¼ê´€ì„± ìœ ì§€

### 3.4.2 ì¸ë±ìŠ¤ ì„¤ê³„

**ë²¡í„° ê²€ìƒ‰ ì¸ë±ìŠ¤**:
```sql
CREATE INDEX panels_embedding_idx ON panels 
USING ivfflat (embedding vector_cosine_ops) 
WITH (lists = 100);
```

**ì¼ë°˜ ê²€ìƒ‰ ì¸ë±ìŠ¤**:
- `panels_name_idx`: ì´ë¦„ ê²€ìƒ‰
- `panels_gender_idx`: ì„±ë³„ í•„í„°
- `panels_region_idx`: ì§€ì—­ í•„í„°
- `panels_age_idx`: ë‚˜ì´ ë²”ìœ„ í•„í„°

### 3.4.3 ë°ì´í„° íë¦„

#### ì„ë² ë”© ìƒì„±:
```
ì›ë³¸ í…ìŠ¤íŠ¸ ë°ì´í„°
  â†“
HuggingFace Sentence-Transformers
  â†“
768ì°¨ì› ë²¡í„°
  â†“
PostgreSQL (pgvector) ì €ì¥
```

#### ê²€ìƒ‰ ì‹œ:
```
ì¿¼ë¦¬ í…ìŠ¤íŠ¸
  â†“
ì„ë² ë”© ë³€í™˜
  â†“
pgvector ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê²€ìƒ‰
  â†“
RawData í…Œì´ë¸”ê³¼ JOIN
  â†“
ê²°ê³¼ ë°˜í™˜
```

---

## 3.5 ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„

### 3.5.1 REST API ì„¤ê³„

#### 3.5.1.1 ê²€ìƒ‰ API

**POST /api/search**
- **ëª©ì **: ë²¡í„° ê¸°ë°˜ ì˜ë¯¸ ê²€ìƒ‰
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "query": "ê²€ìƒ‰ì–´",
    "filters": {
      "selectedGenders": ["F"],
      "selectedRegions": ["ì„œìš¸"],
      "ageRange": [20, 30]
    },
    "page": 1,
    "limit": 20
  }
  ```
- **ì‘ë‹µ**:
  ```json
  {
    "query": "ê²€ìƒ‰ì–´",
    "page": 1,
    "page_size": 20,
    "count": 20,
    "total": 150,
    "pages": 8,
    "mode": "vector",
    "results": [...]
  }
  ```

#### 3.5.1.2 íŒ¨ë„ ìƒì„¸ API

**GET /api/panels/{panel_id}**
- **ëª©ì **: íŒ¨ë„ ìƒì„¸ ì •ë³´ ì¡°íšŒ
- **ì‘ë‹µ**: íŒ¨ë„ì˜ ëª¨ë“  ì •ë³´ (ì¸êµ¬í†µê³„, ì‘ë‹µ, íƒœê·¸ ë“±)

#### 3.5.1.3 í´ëŸ¬ìŠ¤í„°ë§ API

**POST /api/clustering/run**
- **ëª©ì **: í´ëŸ¬ìŠ¤í„°ë§ ì‹¤í–‰
- **ìš”ì²­**:
  ```json
  {
    "panel_ids": ["P001", "P002", ...],
    "algo": "kmeans",
    "n_clusters": 6,
    "spherical": true
  }
  ```
- **ì‘ë‹µ**: ì„¸ì…˜ ID, í´ëŸ¬ìŠ¤í„° ë¼ë²¨, í‰ê°€ ì§€í‘œ

**POST /api/clustering/compare**
- **ëª©ì **: ë‘ ê·¸ë£¹ ë¹„êµ
- **ìš”ì²­**:
  ```json
  {
    "session_id": "session-123",
    "c1": 0,
    "c2": 1
  }
  ```
- **ì‘ë‹µ**: SMD, JSD ë¹„êµ ê²°ê³¼, rankings

**POST /api/clustering/umap**
- **ëª©ì **: UMAP 2D ì¢Œí‘œ ê³„ì‚°
- **ìš”ì²­**:
  ```json
  {
    "session_id": "session-123",
    "sample": 1000,
    "metric": "cosine"
  }
  ```
- **ì‘ë‹µ**: 2D ì¢Œí‘œ ë°°ì—´

#### 3.5.1.4 Health Check API

**GET /health**: ê¸°ë³¸ í—¬ìŠ¤ ì²´í¬
**GET /health/db**: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìƒíƒœ
**GET /health/raw-sample**: RawData ìƒ˜í”Œ ì¡°íšŒ

### 3.5.2 í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ í†µì‹ 

#### 3.5.2.1 API í´ë¼ì´ì–¸íŠ¸ ì„¤ê³„

- **ì„¤ì •**: `src/lib/config.ts`
- **ê¸°ë³¸ URL**: `http://127.0.0.1:8004`
- **ì—ëŸ¬ ì²˜ë¦¬**: try-catch ë° toast ì•Œë¦¼
- **íƒ€ì… ì•ˆì „ì„±**: TypeScript ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©

#### 3.5.2.2 ìƒíƒœ ê´€ë¦¬

- **ë¡œì»¬ ìƒíƒœ**: React useState, useEffect
- **íˆìŠ¤í† ë¦¬ ê´€ë¦¬**: `src/lib/history.ts`
- **ì¿¼ë¦¬ ìƒíƒœ**: ê²€ìƒ‰ ì¿¼ë¦¬, í•„í„°, ê²°ê³¼ ìƒíƒœ

### 3.5.3 ì—ëŸ¬ ì²˜ë¦¬

#### ë°±ì—”ë“œ:
- HTTPException ì‚¬ìš©
- ìƒì„¸í•œ ì—ëŸ¬ ë©”ì‹œì§€ ë°˜í™˜
- ë¡œê¹… (print ë˜ëŠ” logging ëª¨ë“ˆ)

#### í”„ë¡ íŠ¸ì—”ë“œ:
- try-catchë¡œ ì—ëŸ¬ ì²˜ë¦¬
- Toast ì•Œë¦¼ìœ¼ë¡œ ì‚¬ìš©ì í”¼ë“œë°±
- í´ë°± UI ì œê³µ

---

## 3.6 ì¤‘ê°„ê²°ê³¼ë¬¼

### 3.6.1 ì™„ë£Œëœ ê¸°ëŠ¥

#### âœ… ë°±ì—”ë“œ

1. **FastAPI ì„œë²„ êµ¬ì¶•**
   - ë¹„ë™ê¸° FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜
   - CORS ì„¤ì •
   - Lifespan ì´ë²¤íŠ¸ ì²˜ë¦¬
   
   **ì£¼ìš” ì†ŒìŠ¤ì½”ë“œ** (`server/app/main.py`):
   ```python
   @asynccontextmanager
   async def lifespan(app: FastAPI):
       """ì•± ìˆ˜ëª…ì£¼ê¸° ê´€ë¦¬ (startup/shutdown)"""
       # startup: DB ì—°ê²° í™•ì¸ + HF ëª¨ë¸ ì›Œë°ì—…
       async with async_engine.begin() as conn:
           await conn.execute(text("SELECT 1"))
       _hf_model()  # HuggingFace ëª¨ë¸ ì‚¬ì „ ë¡œë“œ
       yield
       # shutdown: ì •ë¦¬ ì‘ì—…
   ```

2. **ë²¡í„° ê²€ìƒ‰ ì‹œìŠ¤í…œ**
   - HuggingFace ì„ë² ë”© ìƒì„± (`intfloat/multilingual-e5-base`, 768ì°¨ì›)
   - pgvector ê¸°ë°˜ ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê²€ìƒ‰
   - í•„í„°ë§ ê¸°ëŠ¥ í†µí•© (ì„±ë³„, ì§€ì—­, ë‚˜ì´, ì†Œë“, í€µí´)
   
   **ì£¼ìš” ì†ŒìŠ¤ì½”ë“œ** (`server/app/api/search.py`):
   ```python
   @router.post("/api/search")
   async def api_search_post(payload: Dict[str, Any], session: AsyncSession):
       # 1. í…ìŠ¤íŠ¸ë¥¼ ì„ë² ë”©ìœ¼ë¡œ ë³€í™˜
       query_embedding = embed_text(query_text_clean)
       
       # 2. í•„í„° êµ¬ì„± (ë²¡í„° ê²€ìƒ‰ í›„ ì ìš©)
       vector_filters = {
           "gender": filters_dict.get("selectedGenders"),
           "region": filters_dict.get("selectedRegions"),
           "age_min": filters_dict.get("ageRange")[0],
           "age_max": filters_dict.get("ageRange")[1],
       }
       
       # 3. ë²¡í„° ê²€ìƒ‰ ì‹¤í–‰
       vector_rows = await search_panels_by_embedding(
           session, query_embedding, limit=search_limit, filters=vector_filters
       )
       
       # 4. RawData JOIN í•„í„° ì ìš© (ë‚˜ì´, ì†Œë“, í€µí´)
       filtered_rows = apply_raw_data_filters(vector_rows, vector_filters)
       
       return {"results": filtered_rows, "total": len(filtered_rows), ...}
   ```

3. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™**
   - ë¹„ë™ê¸° SQLAlchemy ì„¸ì…˜
   - DAO íŒ¨í„´ êµ¬í˜„ (`dao_embeddings.py`, `dao_panels.py`)
   - ìŠ¤í‚¤ë§ˆ ê°„ ë¸Œë¦¿ì§€ ë·° ì„¤ê³„ (`panel_embeddings_v`)
   
   **ì£¼ìš” ì†ŒìŠ¤ì½”ë“œ** (`server/app/db/dao_embeddings.py`):
   ```python
   async def search_panels_by_embedding(
       session: AsyncSession,
       query_embedding: List[float],
       limit: int = 200,
       filters: Optional[Dict] = None
   ):
       # ë²¡í„° ìœ ì‚¬ë„ ê²€ìƒ‰ ì¿¼ë¦¬
       sql = text("""
           SELECT mb_sn, demographics, combined_text,
                  1 - (embedding <#> CAST(:query_embedding AS vector)) AS similarity
           FROM panel_embeddings_v
           WHERE embedding IS NOT NULL
           AND 1 - (embedding <#> CAST(:query_embedding AS vector)) >= 0.9
           [í•„í„° ì¡°ê±´ ì¶”ê°€]
           ORDER BY embedding <#> CAST(:query_embedding AS vector) ASC
           LIMIT :limit
       """)
       result = await session.execute(sql, {"query_embedding": query_embedding, ...})
       return [dict(row) for row in result]
   ```

4. **API ì—”ë“œí¬ì¸íŠ¸**
   - `POST /api/search`: ë²¡í„° ê²€ìƒ‰ (í•„í„°ë§ ì§€ì›)
   - `GET /api/panels/{id}`: íŒ¨ë„ ìƒì„¸ ì •ë³´ ì¡°íšŒ
   - `GET /health`: í—¬ìŠ¤ ì²´í¬
   - `GET /health/db`: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìƒíƒœ í™•ì¸

#### âœ… í”„ë¡ íŠ¸ì—”ë“œ

1. **React ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¡°**
   - TypeScript ê¸°ë°˜ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„
   - í˜ì´ì§€ ê¸°ë°˜ ë¼ìš°íŒ… (`start`, `results`)
   - ìƒíƒœ ê´€ë¦¬ (React hooks: useState, useEffect)
   - UI ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ êµ¬ì¶•
   
   **ì£¼ìš” ì†ŒìŠ¤ì½”ë“œ** (`src/App.tsx`):
   ```typescript
   export default function App() {
     const [view, setView] = useState<AppView>('start');
     const [query, setQuery] = useState('');
     const [filters, setFilters] = useState<any>({});
     
     const handleSearch = (searchQuery: string) => {
       setQuery(searchQuery);
       setView('results');
       setFilters({}); // ê²€ìƒ‰ ì‹œ í•„í„° ì´ˆê¸°í™”
     };
     
     return (
       <div>
         {view === 'start' && <StartPage onSearch={handleSearch} />}
         {view === 'results' && <ResultsPage query={query} filters={filters} />}
       </div>
     );
   }
   ```

2. **ê²€ìƒ‰ ì¸í„°í˜ì´ìŠ¤**
   - `StartPage`: ë©”ì¸ ê²€ìƒ‰ í˜ì´ì§€ (ìì—°ì–´ ê²€ìƒ‰ ì…ë ¥, ë¹ ë¥¸ ì•¡ì…˜)
   - `ResultsPage`: ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ (í…Œì´ë¸”/ì¹´ë“œ ë·°, í˜ì´ì§€ë„¤ì´ì…˜)
   - `FilterDrawer`: ê³ ê¸‰ í•„í„°ë§ (ì„±ë³„, ì§€ì—­, ë‚˜ì´, ì†Œë“, í€µí´, ê´€ì‹¬ì‚¬)
   
   **ì£¼ìš” ì†ŒìŠ¤ì½”ë“œ** (`src/components/drawers/FilterDrawer.tsx`):
   ```typescript
   export function FilterDrawer({ isOpen, onClose, onApply, initialFilters }: FilterDrawerProps) {
     const [selectedGenders, setSelectedGenders] = useState<string[]>([]);
     const [selectedRegions, setSelectedRegions] = useState<string[]>([]);
     const [ageRange, setAgeRange] = useState<[number, number]>([15, 80]);
     const [selectedIncomes, setSelectedIncomes] = useState<string[]>([]);
     const [quickpollOnly, setQuickpollOnly] = useState(false);
     
     const handleApply = () => {
       const filters = {
         selectedGenders, selectedRegions, ageRange,
         selectedIncomes, quickpollOnly, interests, interestLogic
       };
       onApply?.(filters);
       onClose();
     };
     
     return (
       <AnimatePresence>
         {isOpen && (
           <motion.div>
             {/* í•„í„° UI êµ¬ì„± */}
             <GenderChips value={selectedGenders} onChange={setSelectedGenders} />
             <AgeSlider value={ageRange} onChange={setAgeRange} />
             <RegionGroups value={selectedRegions} onChange={setSelectedRegions} />
             {/* ... */}
           </motion.div>
         )}
       </AnimatePresence>
     );
   }
   ```

3. **UI ì»´í¬ë„ŒíŠ¸**
   - PI ì „ìš© ì»´í¬ë„ŒíŠ¸: `PIButton`, `PICard`, `PIBadge`, `PIChip`, `PIBookmarkStar` ë“±
   - ê³µí†µ UI ì»´í¬ë„ŒíŠ¸: Radix UI ê¸°ë°˜ (`button`, `dialog`, `drawer`, `tabs` ë“±)
   - ë“œë¡œì–´ ë° ëª¨ë‹¬: `FilterDrawer`, `PanelDetailDrawer`, `ExportDrawer`
   - ìš”ì•½ ëŒ€ì‹œë³´ë“œ: `SummaryBar`, `HeaderStrip`, `KpiRow`, `DistributionRow`, `InsightBlock`
   
   **ì£¼ìš” ì†ŒìŠ¤ì½”ë“œ** (`src/components/summary/SummaryBar.tsx`):
   ```typescript
   export function SummaryBar({ data }: { data: SummaryData }) {
     return (
       <div className="summary-bar">
         <HeaderStrip data={data} />      {/* Row A: ìš”ì•½ ì¹© + ë¹ ë¥¸ ì•¡ì…˜ */}
         <KpiRow data={data} />           {/* Row B: KPI ì¹´ë“œ (3-5ê°œ) */}
         <DistributionRow data={data} />  {/* Row C: ë¶„í¬ ì‹œê°í™” */}
         <InsightBlock data={data} />     {/* Row D: AI ì¸ì‚¬ì´íŠ¸ */}
       </div>
     );
   }
   ```

4. **ì‚¬ìš©ì ê²½í—˜ ê¸°ëŠ¥**
   - í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤: `/` (ê²€ìƒ‰ í¬ì»¤ìŠ¤), `Cmd+K` (ëª…ë ¹ íŒ”ë ˆíŠ¸)
   - íˆìŠ¤í† ë¦¬ ê´€ë¦¬: ê²€ìƒ‰ ì´ë ¥ ì €ì¥ ë° ì¬ì‚¬ìš©
   - Toast ì•Œë¦¼: ì„±ê³µ/ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
   - ë‹¤í¬ ëª¨ë“œ: ì „ì—­ í…Œë§ˆ ì „í™˜ ì‹œìŠ¤í…œ
   - í”„ë¦¬ì…‹ ê´€ë¦¬: í•„í„° ì¡°í•© ì €ì¥/ë¡œë“œ (LocalStorage)
   - ë¶ë§ˆí¬ ê¸°ëŠ¥: íŒ¨ë„ ë¶ë§ˆí¬ ì €ì¥/ê´€ë¦¬
   
   **ì£¼ìš” ì†ŒìŠ¤ì½”ë“œ** (`src/lib/presetManager.ts`):
   ```typescript
   export const presetManager = {
     loadPresets(): FilterPreset[] {
       const stored = localStorage.getItem('filter_presets');
       return stored ? JSON.parse(stored) : [];
     },
     
     addPreset(name: string, filters: FilterPreset['filters']): FilterPreset {
       const presets = this.loadPresets();
       const newPreset = {
         id: `preset-${Date.now()}-${Math.random()}`,
         name, filters, timestamp: Date.now(), scope: 'ê°œì¸'
       };
       presets.unshift(newPreset);
       this.savePresets(presets);
       return newPreset;
     },
     
     updatePreset(id: string, updates: Partial<FilterPreset>): FilterPreset | null {
       const presets = this.loadPresets();
       const index = presets.findIndex(p => p.id === id);
       if (index === -1) return null;
       presets[index] = { ...presets[index], ...updates, timestamp: Date.now() };
       this.savePresets(presets);
       return presets[index];
     }
   };
   ```

### 3.6.2 ì£¼ìš” ê¸°ëŠ¥ ë°ëª¨

#### 3.6.2.1 ë©”ì¸ ê²€ìƒ‰ í˜ì´ì§€ (StartPage)
**ìŠ¤í¬ë¦°ìƒ· ìœ„ì¹˜**: *[ìŠ¤í¬ë¦°ìƒ· 1]*

**ì„¤ëª…**:
- ì¤‘ì•™ ì§‘ì¤‘í˜• ë ˆì´ì•„ì›ƒìœ¼ë¡œ ìì—°ì–´ ê²€ìƒ‰ ì…ë ¥ í•„ë“œ ì œê³µ
- ë¹ ë¥¸ ì•¡ì…˜ ì¹©: í•„í„°, í”„ë¦¬ì…‹, ë¶ë§ˆí¬, ëª…ë ¹ íŒ”ë ˆíŠ¸ ì ‘ê·¼
- í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì•ˆë‚´: `/` (ê²€ìƒ‰ í¬ì»¤ìŠ¤), `Cmd+K` (ëª…ë ¹ íŒ”ë ˆíŠ¸)
- ë‹¤í¬ ëª¨ë“œ ì§€ì›: ì „ì—­ í…Œë§ˆ ì „í™˜ ê°€ëŠ¥
- ë³„ íš¨ê³¼: ëœë”© í˜ì´ì§€ì— ì •ì ì¸ ë³„ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼

**ì£¼ìš” ê¸°ëŠ¥**:
- ìì—°ì–´ ê²€ìƒ‰ì–´ ì…ë ¥ ë° ê²€ìƒ‰ ì‹¤í–‰
- í”„ë¦¬ì…‹ ë©”ë‰´: ì €ì¥ëœ í•„í„° ì¡°í•© ë¡œë“œ
- ë¶ë§ˆí¬ íŒ¨ë„: ë¶ë§ˆí¬ëœ íŒ¨ë„ ëª©ë¡ í™•ì¸
- ëª…ë ¹ íŒ”ë ˆíŠ¸: í‚¤ë³´ë“œë¡œ ëª¨ë“  ê¸°ëŠ¥ ì ‘ê·¼

---

#### 3.6.2.2 ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€ (ResultsPage)
**ìŠ¤í¬ë¦°ìƒ· ìœ„ì¹˜**: *[ìŠ¤í¬ë¦°ìƒ· 2]*

**ì„¤ëª…**:
- ìƒë‹¨ ìš”ì•½ ëŒ€ì‹œë³´ë“œ: ì´ ê²°ê³¼ ìˆ˜, Q ì‘ë‹µë¥ , ì—¬ì„± ë¹„ìœ¨, ì§€ì—­ Top3, ê´€ì‹¬ì‚¬ Top5 ë“±
- ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ: í…Œì´ë¸” ë·° ë˜ëŠ” ì¹´ë“œ ë·° ì„ íƒ ê°€ëŠ¥
- ì •ë ¬ ê¸°ëŠ¥: ìµœì‹ ìˆœ/ì˜¤ë˜ëœìˆœ ì„ íƒ
- í˜ì´ì§€ë„¤ì´ì…˜: 20ê°œì”© ê²°ê³¼ í‘œì‹œ
- ë¹ ë¥¸ í•„í„°: ì„±ë³„, ì§€ì—­ ë“± ì£¼ìš” í•„í„° ì¹©ìœ¼ë¡œ ë¹ ë¥¸ í•„í„°ë§

**ì£¼ìš” ê¸°ëŠ¥**:
- ê²€ìƒ‰ ê²°ê³¼ í…Œì´ë¸”/ì¹´ë“œ ë·° ì „í™˜
- íŒ¨ë„ ìƒì„¸ ì •ë³´ ì¡°íšŒ (mb_sn í´ë¦­)
- ë¶ë§ˆí¬ ì¶”ê°€/ì œê±° (ë³„ ì•„ì´ì½˜ í´ë¦­)
- í•„í„° ë“œë¡œì–´ ì—´ê¸°
- í”„ë¦¬ì…‹ ì ìš© ë° í¸ì§‘

---

#### 3.6.2.3 í•„í„° ë“œë¡œì–´ (FilterDrawer)
**ìŠ¤í¬ë¦°ìƒ· ìœ„ì¹˜**: *[ìŠ¤í¬ë¦°ìƒ· 3]*

**ì„¤ëª…**:
- í•˜ë‹¨ì—ì„œ ìŠ¬ë¼ì´ë“œ ì—… ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ ë“±ì¥
- ì„¹ì…˜ë³„ í•„í„° êµ¬ì„±: ì„±ë³„, ë‚˜ì´, ì§€ì—­, ì†Œë“, ê´€ì‹¬ì‚¬, í€µí´
- ì‹¤ì‹œê°„ í•„í„° ê²°ê³¼ ìˆ˜ í‘œì‹œ (í˜„ì¬ í•„í„° ê²°ê³¼: XXXëª…)
- í”„ë¦¬ì…‹ ì €ì¥ ê¸°ëŠ¥: í˜„ì¬ í•„í„°ë¥¼ ì´ë¦„ê³¼ í•¨ê»˜ ì €ì¥
- í”„ë¦¬ì…‹ ìˆ˜ì • ê¸°ëŠ¥: ì €ì¥ëœ í”„ë¦¬ì…‹ì˜ í•„í„° ì¡°ê±´ ìˆ˜ì •

**ì£¼ìš” ê¸°ëŠ¥**:
- ì„±ë³„ ì„ íƒ: ì—¬ì„±/ë‚¨ì„± ì²´í¬ë°•ìŠ¤
- ë‚˜ì´ ë²”ìœ„: ìŠ¬ë¼ì´ë”ë¡œ 15~80ì„¸ ë²”ìœ„ ì„ íƒ
- ì§€ì—­ ì„ íƒ: ìˆ˜ë„ê¶Œ/ê´‘ì—­ì‹œ/ë„ ê·¸ë£¹ë³„ ë‹¤ì¤‘ ì„ íƒ
- ì†Œë“ ë²”ìœ„: ~200, 200~300, 300~400, 400~600, 600~ (ë§Œì› ë‹¨ìœ„)
- ê´€ì‹¬ì‚¬ íƒœê·¸: ì§ì ‘ ì…ë ¥í•˜ì—¬ íƒœê·¸ ìƒì„± (AND/OR ë…¼ë¦¬ ì„ íƒ)
- í€µí´ ì‘ë‹µ ë³´ìœ  ì—¬ë¶€: í† ê¸€ ìŠ¤ìœ„ì¹˜

---

#### 3.6.2.4 íŒ¨ë„ ìƒì„¸ ì •ë³´ (PanelDetailDrawer)
**ìŠ¤í¬ë¦°ìƒ· ìœ„ì¹˜**: *[ìŠ¤í¬ë¦°ìƒ· 4]*

**ì„¤ëª…**:
- ì¤‘ì•™ ëª¨ë‹¬ ì°½ìœ¼ë¡œ íŒ¨ë„ ìƒì„¸ ì •ë³´ í‘œì‹œ
- í¬ê¸° ì¡°ì ˆ ê°€ëŠ¥: ë“œë˜ê·¸ë¡œ ìœ„ì¹˜ ë³€ê²½, ë¦¬ì‚¬ì´ì¦ˆ ê°€ëŠ¥
- ìŠ¤í¬ë¡¤ ê°€ëŠ¥: ê¸´ í…ìŠ¤íŠ¸ ë‚´ìš© ìŠ¤í¬ë¡¤í•˜ì—¬ í™•ì¸
- íƒ­ ë„¤ë¹„ê²Œì´ì…˜: ê°œìš”, ì‘ë‹µì´ë ¥, íƒœê·¸/ê·¼ê±° íƒ­ìœ¼ë¡œ ì •ë³´ ë¶„ë¥˜

**ì£¼ìš” ì •ë³´**:
- ê¸°ë³¸ ì •ë³´: mb_sn, ì„±ë³„, ë‚˜ì´, ì§€ì—­, ì‘ë‹µ ì´ë ¥ ë“±
- ì‘ë‹µ ì´ë ¥: JSONB í˜•ì‹ì˜ ìƒì„¸ ì‘ë‹µ ë°ì´í„°
- íƒœê·¸ ë° ì¹´í…Œê³ ë¦¬: íŒ¨ë„ ë¶„ë¥˜ ì •ë³´

---

#### 3.6.2.5 ìš”ì•½ ëŒ€ì‹œë³´ë“œ (SummaryBar)
**ìŠ¤í¬ë¦°ìƒ· ìœ„ì¹˜**: *[ìŠ¤í¬ë¦°ìƒ· 5]*

**ì„¤ëª…**:
- 4í–‰ ì»´íŒ©íŠ¸ ëŒ€ì‹œë³´ë“œ (ìµœëŒ€ ë†’ì´ 320px)
- Row A (56px): ìš”ì•½ ì¹© + ë¹ ë¥¸ ì•¡ì…˜ ë²„íŠ¼
- Row B (88px): KPI ì¹´ë“œ (3-5ê°œ, ì´ ê²°ê³¼, ì»¤ë²„ë¦¬ì§€, ìµœì‹ ì„± ë“±)
- Row C (120px): ë¶„í¬ ì‹œê°í™” (Q vs W ìŠ¤íƒë°”, ì„±ë³„ ë„ë„›, ì§€ì—­/ê´€ì‹¬ì‚¬ ì¹©)
- Row D (56px/160px): AI ì¸ì‚¬ì´íŠ¸ (ì ‘ê¸°/í¼ì¹˜ê¸° ê°€ëŠ¥)

**ì£¼ìš” ê¸°ëŠ¥**:
- í´ë¦­ ê°€ëŠ¥í•œ ìš”ì•½ ì¹©: í•´ë‹¹ í•„í„° ì„¹ì…˜ìœ¼ë¡œ ë°”ë¡œ ì´ë™
- KPI ìë™ ìš°ì„ ìˆœìœ„: ê²°ê³¼ ìˆ˜ì— ë”°ë¼ í‘œì‹œí•  ì¹´ë“œ ìë™ ì„ íƒ
- ì¡°ê±´ë¶€ ë Œë”ë§: ê°’ì´ ì—†ìœ¼ë©´ í•´ë‹¹ ì‹œê°í™” ìˆ¨ê¹€
- ë‹¤í¬ ëª¨ë“œ ì§€ì›: í…Œë§ˆì— ë§ì¶° ìƒ‰ìƒ ìë™ ì¡°ì •

---

#### 3.6.2.6 í”„ë¦¬ì…‹ ê´€ë¦¬ (PIPresetMenu)
**ìŠ¤í¬ë¦°ìƒ· ìœ„ì¹˜**: *[ìŠ¤í¬ë¦°ìƒ· 6]*

**ì„¤ëª…**:
- í™”ë©´ ì¤‘ì•™ ëª¨ë‹¬ë¡œ í”„ë¦¬ì…‹ ëª©ë¡ í‘œì‹œ
- í”„ë¦¬ì…‹ ì ìš©: "ê²€ìƒ‰" ë²„íŠ¼ìœ¼ë¡œ í”„ë¦¬ì…‹ í•„í„° ì ìš© ë° ê²€ìƒ‰ ì‹¤í–‰
- í”„ë¦¬ì…‹ ìˆ˜ì •: "ìˆ˜ì •" ë²„íŠ¼ìœ¼ë¡œ í•„í„° ë“œë¡œì–´ì—ì„œ í”„ë¦¬ì…‹ í¸ì§‘
- í”„ë¦¬ì…‹ ì‚­ì œ: "ì‚­ì œ" ë²„íŠ¼ìœ¼ë¡œ í”„ë¦¬ì…‹ ì œê±°
- í”„ë¦¬ì…‹ ì €ì¥: í•„í„° ë“œë¡œì–´ì—ì„œ í˜„ì¬ í•„í„°ë¥¼ ìƒˆ í”„ë¦¬ì…‹ìœ¼ë¡œ ì €ì¥

**ì£¼ìš” ê¸°ëŠ¥**:
- í”„ë¦¬ì…‹ ëª©ë¡ í‘œì‹œ: ì´ë¦„, ìƒì„± ë‚ ì§œ, í•„í„° ìš”ì•½
- í”„ë¦¬ì…‹ ê²€ìƒ‰: í•„í„° ì ìš© í›„ ê²€ìƒ‰ ì‹¤í–‰
- í”„ë¦¬ì…‹ í¸ì§‘: í•„í„° ì¡°ê±´ ìˆ˜ì • ë° ì €ì¥
- LocalStorage ê¸°ë°˜ ì˜êµ¬ ì €ì¥

---

### 3.6.3 ì§„í–‰ ì¤‘ì¸ ê¸°ëŠ¥

#### ğŸš§ í´ëŸ¬ìŠ¤í„°ë§ ê¸°ëŠ¥
- API ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„ ì™„ë£Œ (`/api/clustering/run`, `/api/clustering/compare`)
- ì‹¤ì œ í´ëŸ¬ìŠ¤í„°ë§ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„ í•„ìš” (K-Means, HDBSCAN)
- UMAP ì‹œê°í™” ì—°ë™ í•„ìš” (`/api/clustering/umap`)

#### ğŸš§ RAG ê²€ìƒ‰
- í”Œë ˆì´ìŠ¤í™€ë” êµ¬í˜„ ì™„ë£Œ (`/api/search-rag`)
- ì‹¤ì œ RAG íŒŒì´í”„ë¼ì¸ êµ¬í˜„ í•„ìš”
- LangChain í†µí•© í•„ìš”

### 3.6.4 ê°œë°œ í™˜ê²½ êµ¬ì„±

#### ë°±ì—”ë“œ:
- Python 3.13 í™˜ê²½
- FastAPI ì„œë²„ (í¬íŠ¸ 8004)
- PostgreSQL + pgvector í™•ì¥
- HuggingFace Sentence-Transformers (ì„ë² ë”© ìƒì„±)

#### í”„ë¡ íŠ¸ì—”ë“œ:
- Node.js 18+ í™˜ê²½
- Vite ê°œë°œ ì„œë²„ (í¬íŠ¸ 5173)
- TypeScript ì»´íŒŒì¼ëŸ¬
- React 18 + TypeScript

### 3.6.5 ë¬¸ì„œí™”

- âœ… `README.md`: í”„ë¡œì íŠ¸ ê°œìš” ë° ì„¤ì¹˜ ê°€ì´ë“œ
- âœ… `ì¤‘ê°„ë³´ê³ ì„œ.md`: ìƒì„¸ ì„¤ê³„ ë° êµ¬í˜„ ë‚´ìš© (ë³¸ ë¬¸ì„œ)
- âœ… API ì—”ë“œí¬ì¸íŠ¸ ë¬¸ì„œ (FastAPI ìë™ ìƒì„±: `/docs`, `/redoc`)
- âœ… ì½”ë“œ ì£¼ì„ ë° TypeScript íƒ€ì… ì •ì˜

### 3.6.6 ë‹¤ìŒ ë‹¨ê³„ ê³„íš

1. **í´ëŸ¬ìŠ¤í„°ë§ ê¸°ëŠ¥ ì™„ì„±**
   - K-Means/HDBSCAN ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
   - í”¼ì²˜ ì „ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ ì™„ì„±
   - í‰ê°€ ì§€í‘œ ê³„ì‚° ë¡œì§ êµ¬í˜„

2. **ë¹„êµ ë¶„ì„ ê¸°ëŠ¥ ì™„ì„±**
   - SMD/JSD ê³„ì‚° ë¡œì§ êµ¬í˜„
   - Rankings ì •ë ¬ ê¸°ëŠ¥
   - ì°¨íŠ¸ ì‹œê°í™”

3. **RAG ê²€ìƒ‰ êµ¬í˜„**
   - LangChain Retriever í†µí•©
   - LLM ë‹µë³€ ìƒì„±
   - ì²­í¬ ê²€ìƒ‰ ìµœì í™”

4. **ì„±ëŠ¥ ìµœì í™”**
   - ë²¡í„° ê²€ìƒ‰ ì„±ëŠ¥ íŠœë‹
   - ì¸ë±ìŠ¤ ìµœì í™”
   - ìºì‹± ì „ëµ

5. **í…ŒìŠ¤íŠ¸ ë° í’ˆì§ˆ ê´€ë¦¬**
   - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
   - í†µí•© í…ŒìŠ¤íŠ¸
   - ì‚¬ìš©ì í…ŒìŠ¤íŠ¸

---

## 4. ìƒì„¸ ì„¤ê³„

ìƒì„¸ ì„¤ê³„ëŠ” ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ì™€ íë¦„ë„ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê° ëª¨ë“ˆê³¼ ì»´í¬ë„ŒíŠ¸ì˜ ë‚´ë¶€ êµ¬ì¡°, ì•Œê³ ë¦¬ì¦˜, ë°ì´í„° êµ¬ì¡°, í•¨ìˆ˜/ë©”ì„œë“œ ëª…ì„¸ ë“±ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ê³„í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.

### 4.1 ë°±ì—”ë“œ ëª¨ë“ˆ ìƒì„¸ ì„¤ê³„

#### 4.1.1 ê²€ìƒ‰ API ëª¨ë“ˆ (search.py)

**ëª¨ë“ˆ ê°œìš”**:
- ë²¡í„° ê¸°ë°˜ ì˜ë¯¸ ê²€ìƒ‰ì„ ì²˜ë¦¬í•˜ëŠ” API ì—”ë“œí¬ì¸íŠ¸
- í•„í„° ì ìš© ë° í˜ì´ì§€ë„¤ì´ì…˜ ì²˜ë¦¬

**ì£¼ìš” í•¨ìˆ˜**:

1. **`api_search_post()`**
   - **ì—­í• **: ê²€ìƒ‰ ìš”ì²­ ì²˜ë¦¬ ë° ì‘ë‹µ ìƒì„±
   - **ì…ë ¥**:
     ```python
     {
         "query": str,           # ê²€ìƒ‰ì–´ (ìì—°ì–´)
         "filters": dict,        # í•„í„° ê°ì²´
         "page": int,            # í˜ì´ì§€ ë²ˆí˜¸
         "limit": int            # í˜ì´ì§€ë‹¹ ê²°ê³¼ ìˆ˜
     }
     ```
   - **ì²˜ë¦¬ ê³¼ì •**:
     1. ê²€ìƒ‰ì–´ í…ìŠ¤íŠ¸ ê²€ì¦
     2. ì„ë² ë”© ìƒì„± (embed_text)
     3. í•„í„° íŒŒì‹± ë° ë³€í™˜
     4. ë²¡í„° ê²€ìƒ‰ ì‹¤í–‰ (search_panels_by_embedding)
     5. í•„í„° ì ìš© (ë‚˜ì´, ì†Œë“, í€µí´)
     6. í˜ì´ì§€ë„¤ì´ì…˜ ì ìš©
     7. ê²°ê³¼ í¬ë§·íŒ… ë° ë°˜í™˜
   - **ì¶œë ¥**: JSON ì‘ë‹µ (results, total, pages, mode)

**ì•Œê³ ë¦¬ì¦˜ ì„¤ê³„**:
- **í•„í„° ì ìš© ì•Œê³ ë¦¬ì¦˜**:
  ```
  1. ë²¡í„° ê²€ìƒ‰ ê²°ê³¼ ìˆ˜ì‹ 
  2. í•„í„° íƒ€ì…ë³„ ë¶„ë¥˜:
     - SQL ë ˆë²¨: ì„±ë³„, ì§€ì—­ (demographics JSONB)
     - Python ë ˆë²¨: ë‚˜ì´, ì†Œë“, í€µí´ (RawData JOIN)
  3. RawData í…Œì´ë¸” ì¡°íšŒ (mb_sn ë¦¬ìŠ¤íŠ¸ë¡œ ì¼ê´„ ì¡°íšŒ)
  4. Pythonì—ì„œ í•„í„° ì¡°ê±´ ì²´í¬
  5. í•„í„°ë§ëœ ê²°ê³¼ ë°˜í™˜
  ```

**ì—ëŸ¬ ì²˜ë¦¬**:
- ê²€ìƒ‰ì–´ê°€ ì—†ì„ ê²½ìš°: ë¹ˆ ê²°ê³¼ ë°˜í™˜
- ì„ë² ë”© ìƒì„± ì‹¤íŒ¨: ì—ëŸ¬ ë©”ì‹œì§€ í¬í•¨í•œ ì‘ë‹µ
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨: HTTPException (500)

#### 4.1.2 ì„ë² ë”© ì„œë¹„ìŠ¤ ëª¨ë“ˆ (embeddings.py)

**ëª¨ë“ˆ ê°œìš”**:
- HuggingFace Sentence-Transformersë¥¼ ì´ìš©í•œ í…ìŠ¤íŠ¸ ì„ë² ë”© ìƒì„±

**ì£¼ìš” í•¨ìˆ˜**:

1. **`embed_text(text: str) -> List[float]`**
   - **ì—­í• **: í…ìŠ¤íŠ¸ë¥¼ 768ì°¨ì› ë²¡í„°ë¡œ ë³€í™˜
   - **ì•Œê³ ë¦¬ì¦˜**:
     ```
     1. HuggingFace ëª¨ë¸ ë¡œë“œ (ì§€ì—° ë¡œë”©)
     2. í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬: "query: " í”„ë¡¬í”„íŠ¸ ì¶”ê°€
     3. ëª¨ë¸ ì¶”ë¡ : encode() ì‹¤í–‰
     4. ë²¡í„° ì •ê·œí™” (L2 normalization)
     5. 768ì°¨ì› ë²¡í„° ë°˜í™˜
     ```
   - **ì„±ëŠ¥ ìµœì í™”**: ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ ëª¨ë¸ ì¬ì‚¬ìš©
   - **ì—ëŸ¬ ì²˜ë¦¬**: ëª¨ë¸ ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì˜ˆì™¸ ë°œìƒ

#### 4.1.3 ë²¡í„° ê²€ìƒ‰ DAO ëª¨ë“ˆ (dao_embeddings.py)

**ëª¨ë“ˆ ê°œìš”**:
- pgvectorë¥¼ ì´ìš©í•œ ë²¡í„° ìœ ì‚¬ë„ ê²€ìƒ‰ ì²˜ë¦¬

**ì£¼ìš” í•¨ìˆ˜**:

1. **`search_panels_by_embedding()`**
   - **ì—­í• **: ì„ë² ë”© ë²¡í„°ë¡œ ìœ ì‚¬í•œ íŒ¨ë„ ê²€ìƒ‰
   - **SQL ì¿¼ë¦¬ êµ¬ì¡°**:
     ```sql
     SELECT 
         mb_sn,
         demographics,
         combined_text,
         1 - (embedding <#> CAST(:query_embedding AS vector)) AS similarity
     FROM panel_embeddings_v
     WHERE embedding IS NOT NULL
     AND 1 - (embedding <#> CAST(:query_embedding AS vector)) >= 0.9
     [í•„í„° ì¡°ê±´ ì¶”ê°€]
     ORDER BY distance ASC
     LIMIT :limit
     ```
   - **í•„í„° ì ìš©**:
     - ì„±ë³„/ì§€ì—­: SQL WHERE ì ˆì— ì¶”ê°€
     - íŒŒë¼ë¯¸í„° ë°”ì¸ë”©ìœ¼ë¡œ SQL ì¸ì ì…˜ ë°©ì§€
   - **ì„±ëŠ¥**: pgvector ì¸ë±ìŠ¤ í™œìš© (ivfflat)

#### 4.1.4 í•„í„° ì²˜ë¦¬ ëª¨ë“ˆ (search.py ë‚´ë¶€)

**í•„í„° íŒŒì‹± ì•Œê³ ë¦¬ì¦˜**:
```python
def parse_filters(filters_dict: dict) -> dict:
    """
    í”„ë¡ íŠ¸ì—”ë“œ í•„í„° ê°ì²´ë¥¼ ë°±ì—”ë“œ í•„í„° ê°ì²´ë¡œ ë³€í™˜
    
    ì…ë ¥:
        {
            "selectedGenders": ["ì—¬ì„±", "ë‚¨ì„±"],
            "selectedRegions": ["ì„œìš¸", "ê²½ê¸°"],
            "selectedIncomes": ["200~300", "300~400"],
            "ageRange": [20, 39],
            "quickpollOnly": true
        }
    
    ì¶œë ¥:
        {
            "gender": ["ì—¬ì„±", "ë‚¨ì„±"],
            "region": ["ì„œìš¸", "ê²½ê¸°"],
            "income": ["200~300", "300~400"],
            "age_min": 20,
            "age_max": 39,
            "quickpoll_only": true
        }
    """
```

**ì†Œë“ í•„í„° íŒŒì‹± ì•Œê³ ë¦¬ì¦˜**:
```python
def parse_income_range(income_str: str) -> tuple[int, int]:
    """
    ì†Œë“ ë²”ìœ„ ë¬¸ìì—´ì„ ìˆ«ì ë²”ìœ„ë¡œ ë³€í™˜
    
    ì˜ˆì‹œ:
        "200~300" -> (2000000, 3000000)  # ë§Œì› â†’ ì›
        "~200" -> (0, 2000000)
        "600~" -> (6000000, float('inf'))
    """
    if "~" in income_str:
        parts = income_str.replace("ë§Œì›", "").split("~")
        if len(parts) == 2:
            min_income = int(parts[0]) * 10000 if parts[0] else 0
            max_income = int(parts[1]) * 10000 if parts[1] else float('inf')
            return (min_income, max_income)
```

### 4.2 í”„ë¡ íŠ¸ì—”ë“œ ì»´í¬ë„ŒíŠ¸ ìƒì„¸ ì„¤ê³„

#### 4.2.1 FilterDrawer ì»´í¬ë„ŒíŠ¸

**ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°**:
```typescript
interface FilterDrawerProps {
  isOpen: boolean;
  onClose: () => void;
  onApply?: (filters: FilterObject) => void;
  initialFilters?: FilterObject;
}

interface FilterObject {
  selectedGenders: string[];
  selectedRegions: string[];
  selectedIncomes: string[];
  ageRange: [number, number];
  quickpollOnly: boolean;
}
```

**ìƒíƒœ ê´€ë¦¬**:
- ê° í•„í„°ë³„ë¡œ ë…ë¦½ì ì¸ `useState` ì‚¬ìš©
- ì²´í¬ë°•ìŠ¤ ìƒíƒœëŠ” ë°°ì—´ë¡œ ê´€ë¦¬ (ì¶”ê°€/ì œê±°)
- ìŠ¬ë¼ì´ë”ëŠ” `[min, max]` ë°°ì—´ë¡œ ê´€ë¦¬

**ì£¼ìš” ë¡œì§**:
```typescript
// ì²´í¬ë°•ìŠ¤ í† ê¸€ ë¡œì§
const handleCheckboxChange = (value: string, array: string[], setArray: Function) => {
  if (array.includes(value)) {
    setArray(array.filter(item => item !== value));
  } else {
    setArray([...array, value]);
  }
};

// í•„í„° ì ìš© ë¡œì§
const handleApply = () => {
  const filters: FilterObject = {
    selectedGenders,
    selectedRegions,
    selectedIncomes,
    ageRange,
    quickpollOnly
  };
  onApply?.(filters);
  onClose();
};
```

#### 4.2.2 ResultsPage ì»´í¬ë„ŒíŠ¸

**ìƒíƒœ ê´€ë¦¬ êµ¬ì¡°**:
```typescript
// ê²€ìƒ‰ ê²°ê³¼ ìƒíƒœ
const [panels, setPanels] = useState<Panel[]>([]);
const [loading, setLoading] = useState(false);
const [error, setError] = useState<string | null>(null);

// í˜ì´ì§€ë„¤ì´ì…˜ ìƒíƒœ
const [currentPage, setCurrentPage] = useState(1);
const [totalPages, setTotalPages] = useState(1);
const [totalResults, setTotalResults] = useState(0);
```

**ê²€ìƒ‰ ì‹¤í–‰ ë¡œì§**:
```typescript
const searchPanels = async (pageNum: number = currentPage) => {
  // 1. í•„í„° ê°ì²´ ì¤€ë¹„
  const filtersToSend = {
    selectedGenders: propFilters.selectedGenders || [],
    selectedRegions: propFilters.selectedRegions || [],
    selectedIncomes: propFilters.selectedIncomes || [],
    ageRange: propFilters.ageRange || [],
    quickpollOnly: propFilters.quickpollOnly || false,
  };
  
  // 2. API í˜¸ì¶œ
  const response = await searchApi.searchPanels(
    query.trim(), 
    filtersToSend, 
    pageNum, 
    pageSize
  );
  
  // 3. ê²°ê³¼ ì²˜ë¦¬
  setPanels(response.results || []);
  setTotalResults(response.total || 0);
  setCurrentPage(response.page || pageNum);
  setTotalPages(response.pages || 1);
};
```

**ìë™ ì¬ê²€ìƒ‰ ë¡œì§**:
```typescript
// ì¿¼ë¦¬ ë˜ëŠ” í•„í„° ë³€ê²½ ì‹œ ìë™ ì¬ê²€ìƒ‰
useEffect(() => {
  if (query && query.trim()) {
    setCurrentPage(1);
    searchPanels(1);
  }
}, [query, propFilters]);
```

### 4.3 ë°ì´í„° êµ¬ì¡° ìƒì„¸ ì„¤ê³„

#### 4.3.1 í•„í„° ê°ì²´ ë°ì´í„° êµ¬ì¡°

**í”„ë¡ íŠ¸ì—”ë“œ â†’ ë°±ì—”ë“œ ì „ë‹¬ êµ¬ì¡°**:
```typescript
interface SearchRequest {
  query: string;
  filters: {
    selectedGenders?: string[];      // ["ì—¬ì„±", "ë‚¨ì„±"]
    selectedRegions?: string[];       // ["ì„œìš¸", "ê²½ê¸°", ...]
    selectedIncomes?: string[];       // ["200~300", "300~400", ...]
    ageRange?: [number, number];      // [20, 39]
    quickpollOnly?: boolean;          // true/false
  };
  page: number;
  limit: number;
}
```

**ë°±ì—”ë“œ ë‚´ë¶€ í•„í„° ê°ì²´**:
```python
vector_filters = {
    "gender": List[str],        # ["ì—¬ì„±", "ë‚¨ì„±"]
    "region": List[str],        # ["ì„œìš¸", "ê²½ê¸°"]
    "income": List[str],        # ["200~300", "300~400"]
    "age_min": int,             # 20
    "age_max": int,             # 39
    "quickpoll_only": bool      # True/False
}
```

#### 4.3.2 ê²€ìƒ‰ ê²°ê³¼ ë°ì´í„° êµ¬ì¡°

**API ì‘ë‹µ êµ¬ì¡°**:
```python
{
    "query": str,
    "page": int,
    "page_size": int,
    "count": int,              # í˜„ì¬ í˜ì´ì§€ ê²°ê³¼ ìˆ˜
    "total": int,              # ì „ì²´ ê²°ê³¼ ìˆ˜
    "pages": int,              # ì „ì²´ í˜ì´ì§€ ìˆ˜
    "mode": str,               # "vector"
    "results": [
        {
            "id": str,         # íŒ¨ë„ ID (mb_sn)
            "name": str,
            "gender": str,
            "age": int,
            "region": str,
            "coverage": str,   # "qw" ë˜ëŠ” "w"
            "similarity": float,  # ìœ ì‚¬ë„ ì ìˆ˜ (0.0~1.0)
            "responses": dict,
            "created_at": str
        }
    ]
}
```

### 4.4 ì•Œê³ ë¦¬ì¦˜ ìƒì„¸ ì„¤ê³„

#### 4.4.1 ë²¡í„° ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜

**1ë‹¨ê³„: ì„ë² ë”© ìƒì„±**
```
ì…ë ¥: ìì—°ì–´ í…ìŠ¤íŠ¸
  â†“
í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬: "query: " í”„ë¡¬í”„íŠ¸ ì¶”ê°€
  â†“
HuggingFace ëª¨ë¸ ì¶”ë¡ 
  â†“
L2 ì •ê·œí™”
  â†“
ì¶œë ¥: 768ì°¨ì› ì •ê·œí™”ëœ ë²¡í„°
```

**2ë‹¨ê³„: ë²¡í„° ìœ ì‚¬ë„ ê²€ìƒ‰**
```
ì…ë ¥: ì¿¼ë¦¬ ì„ë² ë”© ë²¡í„° (768ì°¨ì›)
  â†“
pgvector ì½”ì‚¬ì¸ ê±°ë¦¬ ê³„ì‚° (<#> ì—°ì‚°ì)
  â†“
ìœ ì‚¬ë„ ë³€í™˜: similarity = 1 - distance
  â†“
í•„í„°ë§: similarity >= 0.9
  â†“
ì •ë ¬: distance ASC (ê±°ë¦¬ ì˜¤ë¦„ì°¨ìˆœ)
  â†“
ì¶œë ¥: ìƒìœ„ Kê°œ íŒ¨ë„ ID ë° ìœ ì‚¬ë„
```

**3ë‹¨ê³„: í•„í„° ì ìš©**
```
ì…ë ¥: ë²¡í„° ê²€ìƒ‰ ê²°ê³¼ + í•„í„° ê°ì²´
  â†“
í•„í„° íƒ€ì…ë³„ ë¶„ë¥˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SQL ë ˆë²¨       â”‚  Python ë ˆë²¨     â”‚
â”‚  (ì„±ë³„, ì§€ì—­)   â”‚  (ë‚˜ì´, ì†Œë“, í€µí´)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“                    â†“
demographics      RawData JOIN
JSONB í•„í„°ë§      ì •ë³´ ì¡°íšŒ
  â†“                    â†“
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
í•„í„°ë§ëœ ìµœì¢… ê²°ê³¼
```

#### 4.4.2 í•„í„° ìš°ì„ ìˆœìœ„ ë° ì²˜ë¦¬ ìˆœì„œ

**ì²˜ë¦¬ ìˆœì„œ**:
1. **ë²¡í„° ê²€ìƒ‰** (ëª¨ë“  ê²°ê³¼ ëŒ€ìƒ)
2. **SQL ë ˆë²¨ í•„í„°** (ì„±ë³„, ì§€ì—­) - ë²¡í„° ê²€ìƒ‰ ì¤‘ ì ìš©
3. **Python ë ˆë²¨ í•„í„°** (ë‚˜ì´, ì†Œë“, í€µí´) - ê²€ìƒ‰ í›„ ì ìš©
4. **í˜ì´ì§€ë„¤ì´ì…˜** (í•„í„°ë§ëœ ê²°ê³¼ ëŒ€ìƒ)

**ì„±ëŠ¥ ìµœì í™” ì´ìœ **:
- SQL ë ˆë²¨ í•„í„°: ì¸ë±ìŠ¤ í™œìš© ê°€ëŠ¥, DB ë ˆë²¨ ìµœì í™”
- Python ë ˆë²¨ í•„í„°: ë²¡í„° ê²€ìƒ‰ ê²°ê³¼ê°€ ì œí•œì  (200ê°œ)ì´ë¯€ë¡œ ë©”ëª¨ë¦¬ í•„í„°ë§ì´ íš¨ìœ¨ì 

### 4.5 ì—ëŸ¬ ì²˜ë¦¬ ë° ì˜ˆì™¸ ìƒí™© ì„¤ê³„

#### 4.5.1 ì—ëŸ¬ íƒ€ì… ë¶„ë¥˜

**í”„ë¡ íŠ¸ì—”ë“œ ì—ëŸ¬ ì²˜ë¦¬**:
```typescript
// ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬
if (errorMsg.includes('Failed to fetch')) {
  // ë°±ì—”ë“œ ì„œë²„ ì—°ê²° ì‹¤íŒ¨
}

// HTTP ì—ëŸ¬
if (errorMsg.includes('HTTP error')) {
  // ë°±ì—”ë“œëŠ” ì—°ê²°ë˜ì—ˆìœ¼ë‚˜ ì˜¤ë¥˜ ì‘ë‹µ
}

// ê¸°íƒ€ ì—ëŸ¬
// ë°±ì—”ë“œ ë¡œì§ ë˜ëŠ” DB ë¬¸ì œ
```

**ë°±ì—”ë“œ ì—ëŸ¬ ì²˜ë¦¬**:
```python
# ê²€ìƒ‰ì–´ ëˆ„ë½
if not query_text or not str(query_text).strip():
    return {"results": [], "total": 0, ...}

# ì„ë² ë”© ìƒì„± ì‹¤íŒ¨
try:
    query_embedding = embed_text(query_text)
except Exception as embed_error:
    return {"results": [], "error": f"ì„ë² ë”© ìƒì„± ì‹¤íŒ¨: {str(embed_error)}"}

# ë²¡í„° ê²€ìƒ‰ ì‹¤íŒ¨
try:
    vector_rows = await search_panels_by_embedding(...)
except Exception as search_error:
    raise HTTPException(status_code=500, detail=f"ë²¡í„° ê²€ìƒ‰ ì‹¤íŒ¨: {str(search_error)}")
```

#### 4.5.2 ì˜ˆì™¸ ìƒí™© ë° ëŒ€ì‘

| ìƒí™© | ì›ì¸ | ëŒ€ì‘ ë°©ë²• |
|------|------|----------|
| ê²€ìƒ‰ì–´ ì—†ìŒ | ì‚¬ìš©ìê°€ ê²€ìƒ‰ì–´ ì…ë ¥ ì•ˆ í•¨ | ë¹ˆ ê²°ê³¼ ë°˜í™˜ |
| ì„ë² ë”© ìƒì„± ì‹¤íŒ¨ | HuggingFace ëª¨ë¸ ë¡œë“œ ì‹¤íŒ¨ | ì—ëŸ¬ ë©”ì‹œì§€ ë°˜í™˜ |
| ë²¡í„° ê²€ìƒ‰ ì‹¤íŒ¨ | pgvector í™•ì¥ ì—†ìŒ | HTTPException (500) |
| DB ì—°ê²° ì‹¤íŒ¨ | PostgreSQL ì ‘ì† ë¶ˆê°€ | HTTPException (500) |
| í•„í„° íŒŒì‹± ì˜¤ë¥˜ | ì˜ëª»ëœ í•„í„° í˜•ì‹ | ê¸°ë³¸ê°’ ì‚¬ìš© ë˜ëŠ” ì—ëŸ¬ ë°˜í™˜ |

### 4.6 ì„±ëŠ¥ ìµœì í™” ì„¤ê³„

#### 4.6.1 ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ìµœì í™”

**ì¸ë±ìŠ¤ í™œìš©**:
```sql
-- ë²¡í„° ê²€ìƒ‰ ì¸ë±ìŠ¤
CREATE INDEX panels_embedding_idx ON panels 
USING ivfflat (embedding vector_cosine_ops) 
WITH (lists = 100);

-- ì¼ë°˜ ê²€ìƒ‰ ì¸ë±ìŠ¤
CREATE INDEX panels_gender_idx ON panels (gender);
CREATE INDEX panels_region_idx ON panels (region);
CREATE INDEX panels_age_idx ON panels (age);
```

**ì¿¼ë¦¬ ìµœì í™” ì „ëµ**:
- ë²¡í„° ê²€ìƒ‰ í›„ RawData JOIN (ê²°ê³¼ ìˆ˜ê°€ ì ì–´ì„œ íš¨ìœ¨ì )
- íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì‚¬ìš© (SQL ì¸ì ì…˜ ë°©ì§€ ë° ì¿¼ë¦¬ ìºì‹±)
- LIMIT ì ˆë¡œ ê²°ê³¼ ìˆ˜ ì œí•œ (ìµœëŒ€ 200ê°œ)

#### 4.6.2 í”„ë¡ íŠ¸ì—”ë“œ ìµœì í™”

**ìƒíƒœ ê´€ë¦¬ ìµœì í™”**:
- `useEffect` ì˜ì¡´ì„± ë°°ì—´ë¡œ ë¶ˆí•„ìš”í•œ ì¬ë Œë”ë§ ë°©ì§€
- í•„í„° ë³€ê²½ ì‹œì—ë§Œ ì¬ê²€ìƒ‰ ì‹¤í–‰
- ê²€ìƒ‰ ê²°ê³¼ ë©”ëª¨ì´ì œì´ì…˜ (í•„ìš”ì‹œ `useMemo` ì‚¬ìš©)

**ë¡œë”© ìƒíƒœ ê´€ë¦¬**:
```typescript
const [loading, setLoading] = useState(false);

// ë¡œë”© ì¤‘ UI í‘œì‹œ
if (loading) {
  return <LoadingSpinner />;
}
```

---

## ê²°ë¡ 

ë³¸ í”„ë¡œì íŠ¸ëŠ” íŒ¨ë„ ë°ì´í„° ë¶„ì„ì„ ìœ„í•œ ì¢…í•© í”Œë«í¼ì„ êµ¬ì¶•í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•˜ë©°, í˜„ì¬ê¹Œì§€ ë²¡í„° ê¸°ë°˜ ê²€ìƒ‰ ì‹œìŠ¤í…œê³¼ ê¸°ë³¸ UI êµ¬ì¡°ë¥¼ ì„±ê³µì ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„ë¡œ í´ëŸ¬ìŠ¤í„°ë§ ë° ë¹„êµ ë¶„ì„ ê¸°ëŠ¥ì„ ì™„ì„±í•˜ê³ , RAG ê²€ìƒ‰ ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ì™„ì„±í•  ì˜ˆì •ì…ë‹ˆë‹¤.

