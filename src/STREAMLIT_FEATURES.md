# Panel Insight - Streamlit 구현 가능 기능 목록

디자인적 요소를 완전히 배제하고 **순수 기능만** 나열합니다.

---

## 1. 검색 & 필터링

### 1.1 자연어 검색
- **입력**: 텍스트 검색창
- **출력**: 검색어를 기반으로 필터링된 패널 목록
- **예시**: "서울 20대 여성, OTT 이용·스킨케어 관심 200명"

### 1.2 고급 필터
- **인구통계 필터**:
  - 성별: 남성/여성/전체
  - 연령: 범위 선택 (10대~60대+)
  - 지역: 서울/경기/부산/대구/인천 등
  - 소득: 범위 선택 (200만원 미만 ~ 700만원 이상)
  
- **행동/관심사 필터**:
  - 해시태그 선택 (복수 선택 가능)
  - 카테고리: 뷰티/패션/IT/건강/여행 등
  
- **데이터 품질 필터**:
  - Coverage: Q+W / W only
  - 최소 샘플 수
  - 군집 선택 (C1, C2, C3 등)

### 1.3 프리셋 & 북마크
- 자주 사용하는 필터 조합 저장
- 북마크한 검색어 관리
- 프리셋 불러오기/저장/삭제

---

## 2. 결과 표시 & 탐색

### 2.1 패널 목록
- **표시 정보**:
  - 패널 ID
  - Coverage (Q+W / W only)
  - 군집 번호
  - 성별, 연령, 지역
  - 소득 구간
  - 해시태그 (관심사/행동)
  - 응답 수
  
- **정렬 옵션**:
  - 관련도순
  - 최신순
  - 응답 수순
  - 군집별

- **선택 기능**:
  - 체크박스로 복수 선택
  - 전체 선택/해제
  - 선택한 패널 일괄 내보내기

### 2.2 패널 상세 정보
- **기본 정보**:
  - 패널 ID, Coverage
  - 군집 번호 및 레이블
  - 인구통계 정보
  
- **행동 패턴**:
  - 해시태그 목록
  - 관심사 카테고리
  - 행동 특성
  
- **품질 지표**:
  - 응답 수
  - 데이터 완성도
  - 신뢰도 점수

### 2.3 Quick Insight
- **자동 생성 인사이트**:
  - 전체 결과 수
  - 주요 인구통계 분포 (성별/연령/지역)
  - 상위 해시태그 Top 10
  - Coverage 분포
  - 군집 분포

---

## 3. 군집 분석

### 3.1 군집 모델 상태
- **모델 정보**:
  - 알고리즘: KNN+Leiden
  - 차원 축소: UMAP
  - 학습 일자
  - 총 군집 수
  - 노이즈 포인트 수
  
- **품질 지표**:
  - 평균 실루엣 점수 (Overall)
  - 군집별 실루엣 점수
  - DBCV 점수 (선택적)

### 3.2 UMAP 시각화
- **2D 산점도**:
  - X축: UMAP Dim 1
  - Y축: UMAP Dim 2
  - 점: 각 패널
  - 색상: 군집별 구분
  
- **인터랙션**:
  - 특정 패널 하이라이트
  - 군집별 필터링
  - 노이즈 포인트 표시/숨기기

### 3.3 군집 프로필
각 군집(C1, C2, C3...)별 요약:
- **인구통계**:
  - 평균 연령
  - 성별 비율
  - 주요 지역
  - 소득 분포
  
- **행동 특성**:
  - 대표 해시태그 Top 5
  - 특징적인 행동 패턴
  
- **크기 & 품질**:
  - 패널 수
  - 실루엣 점수
  - Coverage 분포

### 3.4 군집 레이블링
- AI가 생성한 군집 설명
- 사용자가 직접 레이블 수정 가능
- 대표 응답 예시 (Evidence)

---

## 4. 비교 분석

### 4.1 그룹 선택
- **비교 대상**: 두 개의 군집 또는 필터 그룹
- Group A vs Group B
- 각 그룹의 기본 정보 표시

### 4.2 분포 차이 (Δ%p)
- **카테고리별 비율 차이**:
  - 카테고리: 해시태그, 관심사, 행동 등
  - Group A 비율 (%)
  - Group B 비율 (%)
  - 차이 (Δ%p)
  
- **정렬 옵션**:
  - Δ%p 내림차순
  - Group A % 내림차순
  - Group B % 내림차순

### 4.3 Lift 분석
- **상대적 특징 강도**:
  - 기준값: 1.0 (전체 평균)
  - Lift > 1: 해당 그룹에서 강함
  - Lift < 1: 해당 그룹에서 약함
  
- **각 특징별**:
  - Group A Lift
  - Group B Lift
  - Base 비율

### 4.4 SMD (표준화 평균 차이)
- **연속형 변수 비교**:
  - 연령, 소득, 응답 수 등
  - SMD 값 (σ 단위)
  - 95% 신뢰구간
  
- **해석**:
  - SMD > 0: Group A가 더 큼
  - SMD < 0: Group B가 더 큼
  - |SMD| > 0.5: 중간 효과
  - |SMD| > 0.8: 큰 효과

---

## 5. 내보내기

### 5.1 내보내기 옵션
- **형식**:
  - CSV
  - Excel (XLSX)
  - JSON
  
- **내용 선택**:
  - 선택한 패널만
  - 전체 검색 결과
  - 현재 필터링된 결과
  
- **포함 필드 선택**:
  - 기본 정보 (ID, Coverage, 군집)
  - 인구통계 (성별, 연령, 지역, 소득)
  - 해시태그 전체
  - 품질 지표

### 5.2 일괄 작업
- 패널 ID 목록 붙여넣기 (대량 조회)
- 선택한 패널 일괄 다운로드

---

## 6. 히스토리 & 관리

### 6.1 최근 본 패널
- **기록 정보**:
  - 패널 ID
  - 군집
  - Coverage
  - 조회 시각
  
- **관리**:
  - 최대 50개 유지
  - 개별 삭제
  - 전체 삭제

### 6.2 검색 히스토리
- 최근 검색어 저장
- 검색어 재사용
- 히스토리 삭제

---

## 7. AI 인사이트 (선택적)

### 7.1 자동 인사이트 생성
- 검색 결과 요약
- 주요 패턴 발견
- 이상치 감지

### 7.2 군집 설명 생성
- 각 군집의 특징 자동 요약
- 대표 키워드 추출
- 차별점 설명

---

## Streamlit 구현 시 권장 구조

```
📁 streamlit_app/
├── 🏠 main.py                    # 메인 앱
├── 📄 pages/
│   ├── 1_🔍_검색_결과.py
│   ├── 2_📊_군집_분석.py
│   ├── 3_⚖️_비교_분석.py
│   └── 4_📥_내보내기.py
├── 🔧 utils/
│   ├── search.py               # 검색 로직
│   ├── filter.py               # 필터링
│   ├── clustering.py           # 군집 분석
│   └── export.py               # 내보내기
└── 📊 data/
    ├── panels.csv              # 패널 데이터
    ├── clusters.pkl            # 군집 모델
    └── umap_embeddings.npy     # UMAP 좌표
```

---

## 핵심 데이터 구조

### Panel 데이터
```python
{
    "id": "P001234",
    "coverage": "Q+W",
    "cluster": "C1",
    "gender": "여성",
    "age": 28,
    "region": "서울",
    "income": "300~400만원",
    "hashtags": ["스킨케어", "OTT", "피트니스", "여행"],
    "response_count": 245,
    "quality_score": 0.87
}
```

### Cluster 데이터
```python
{
    "cluster_id": "C1",
    "label": "20-30대 뷰티·웰니스 관심군",
    "size": 1234,
    "silhouette_score": 0.72,
    "demographics": {
        "avg_age": 27.5,
        "gender_ratio": {"여성": 0.78, "남성": 0.22},
        "top_regions": ["서울", "경기", "부산"]
    },
    "top_hashtags": ["스킨케어", "뷰티", "건강", "피트니스"],
    "evidence": "주로 뷰티 제품 구매하고..."
}
```

---

## 제외되는 디자인 요소 (Streamlit에서 구현 불가/불필요)

❌ 글래스모피즘  
❌ 그라디언트 오브 애니메이션  
❌ 드래그 가능한 패널 윈도우  
❌ 커스텀 호버 효과  
❌ 복잡한 z-index 레이어링  
❌ 세밀한 포커스 링 그라디언트  
❌ 플로팅 애니메이션  
❌ 커스텀 세그먼트 컨트롤 디자인  

---

## Streamlit 기본 컴포넌트 매핑

| Panel Insight 기능 | Streamlit 컴포넌트 |
|-------------------|-------------------|
| 검색창 | `st.text_input()` |
| 필터 | `st.multiselect()`, `st.slider()` |
| 결과 테이블 | `st.dataframe()` |
| 패널 선택 | `st.checkbox()` |
| UMAP 차트 | `st.plotly_chart()` 또는 `st.scatter_chart()` |
| 군집 프로필 | `st.expander()` + `st.metric()` |
| 비교 분석 차트 | `st.bar_chart()`, `st.plotly_chart()` |
| 내보내기 | `st.download_button()` |
| 탭 전환 | `st.tabs()` |
| 사이드바 필터 | `st.sidebar` |

---

**이 문서는 Panel Insight의 순수 기능만 정리한 것으로, Streamlit에서 모든 기능을 구현할 수 있습니다.**
