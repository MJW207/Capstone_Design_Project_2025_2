# í´ëŸ¬ìŠ¤í„°ë§ ì‹œìŠ¤í…œ ì‹¤í–‰ ê°€ì´ë“œ

## âœ… ê¸°ì¡´ ë°©ì‹ê³¼ì˜ í˜¸í™˜ì„±

**ë„¤, ì›ë˜ ì‹¤í–‰í•˜ë˜ ê²ƒì²˜ëŸ¼ í•˜ë©´ ë©ë‹ˆë‹¤!** 

ìƒˆë¡œìš´ í´ëŸ¬ìŠ¤í„°ë§ ì‹œìŠ¤í…œì€ ê¸°ì¡´ ë°©ì‹ê³¼ í˜¸í™˜ë˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1. ì„œë²„ ì‹¤í–‰ (ê¸°ì¡´ê³¼ ë™ì¼)

```bash
# ë°±ì—”ë“œ ì„œë²„
cd server
python -m uvicorn app.main:app --reload --host 127.0.0.1 --port 8004

# í”„ë¡ íŠ¸ì—”ë“œ (ë³„ë„ í„°ë¯¸ë„)
npm run dev
```

### 2. API í˜¸ì¶œ (ê¸°ì¡´ê³¼ ë™ì¼)

í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í´ëŸ¬ìŠ¤í„°ë§ APIë¥¼ í˜¸ì¶œí•˜ë©´ ìë™ìœ¼ë¡œ ìƒˆë¡œìš´ ì‹œìŠ¤í…œì´ ì‘ë™í•©ë‹ˆë‹¤:

```typescript
// í”„ë¡ íŠ¸ì—”ë“œ ì˜ˆì‹œ
const response = await fetch('http://127.0.0.1:8004/api/clustering/cluster', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    panel_ids: ['panel1', 'panel2', ...],
    algo: 'auto',  // ë˜ëŠ” 'kmeans', 'minibatch_kmeans', 'hdbscan'
    use_dynamic_strategy: true  // ë™ì  ì „ëµ ì‚¬ìš© (ê¶Œì¥)
  })
});
```

### 3. ë…ë¦½ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (ê¸°ì¡´ê³¼ ë™ì¼)

`cluster_minibatch.py`ëŠ” ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤:

```bash
python cluster_minibatch.py \
  --input "data/feature_table.csv" \
  --outdir "output/clustering" \
  --k-list 6 8 10 12 \
  --pca 20 \
  --seed 42
```

## ğŸ”„ ë³€ê²½ ì‚¬í•­

### ìë™ ì „ì²˜ë¦¬

ìƒˆë¡œìš´ ì‹œìŠ¤í…œì€ DBì—ì„œ ì¶”ì¶œí•œ ì›ì‹œ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ì „ì²˜ë¦¬í•©ë‹ˆë‹¤:

- **ì›ì‹œ ë°ì´í„°**: `age_raw`, `income_personal`, `gender`, `region_lvl1` ë“±
- **ì „ì²˜ë¦¬ í›„**: `age_z`, `Q6_scaled`, `gender_M`, `is_capital_area` ë“±

### ë™ì  ì „ëµ (ê¸°ë³¸ê°’)

ìƒ˜í”Œ ìˆ˜ì— ë”°ë¼ ìë™ìœ¼ë¡œ ìµœì ì˜ í´ëŸ¬ìŠ¤í„°ë§ ë°©ë²•ì„ ì„ íƒí•©ë‹ˆë‹¤:

- **< 100ëª…**: í”„ë¡œíŒŒì¼ë§ë§Œ ì œê³µ
- **100~500ëª…**: Simple clustering (k=2~4)
- **500~3,000ëª…**: Standard clustering (k=3~8)
- **3,000ëª… ì´ìƒ**: Advanced clustering (k=4~12)

### ëª¨ë“ˆí™”ëœ êµ¬ì¡°

í•„í„°, í”„ë¡œì„¸ì„œ, ì•Œê³ ë¦¬ì¦˜ì„ ììœ ë¡­ê²Œ êµì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```python
# ì»¤ìŠ¤í…€ í•„í„° ì‚¬ìš©
from app.clustering import IntegratedClusteringPipeline, PanelFilter

class MyFilter(PanelFilter):
    def filter(self, data, **kwargs):
        # ì»¤ìŠ¤í…€ í•„í„°ë§ ë¡œì§
        return filtered_data

pipeline = IntegratedClusteringPipeline(
    filter=MyFilter(),
    use_dynamic_strategy=False
)
```

## ğŸ“‹ API ì‘ë‹µ í˜•ì‹

### í´ëŸ¬ìŠ¤í„°ë§ ì‘ë‹µ

```json
{
  "success": true,
  "session_id": "uuid",
  "n_samples": 1000,
  "n_clusters": 6,
  "labels": [0, 1, 2, ...],
  "cluster_sizes": {
    "0": 150,
    "1": 200,
    ...
  },
  "meta": {
    "filter_info": {...},
    "processor_info": {...},
    "algorithm_info": {...}
  }
}
```

## âš ï¸ ì£¼ì˜ì‚¬í•­

### ë°ì´í„° í˜•ì‹

- DBì—ì„œ ì¶”ì¶œí•œ ë°ì´í„°ëŠ” ìë™ìœ¼ë¡œ ì „ì²˜ë¦¬ë©ë‹ˆë‹¤
- í•„ìš”í•œ í”¼ì²˜ê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’(0)ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤
- ë™ì  í”¼ì²˜ ì„ íƒ ê¸°ëŠ¥ì´ ìˆì–´ ì‚¬ìš© ê°€ëŠ¥í•œ í”¼ì²˜ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤

### ì„±ëŠ¥

- ë™ì  ì „ëµì´ í™œì„±í™”ë˜ë©´ ìƒ˜í”Œ ìˆ˜ì— ë”°ë¼ ìë™ìœ¼ë¡œ ìµœì í™”ë©ë‹ˆë‹¤
- ëŒ€ìš©ëŸ‰ ë°ì´í„°(3,000ëª… ì´ìƒ)ëŠ” MiniBatch K-Meansê°€ ìë™ ì„ íƒë©ë‹ˆë‹¤

## ğŸ†˜ ë¬¸ì œ í•´ê²°

### "ìœ íš¨ í”¼ì³ ë¶€ì¡±" ì˜¤ë¥˜

- ë°ì´í„°ì— í•„ìš”í•œ í”¼ì²˜ê°€ ì—†ëŠ” ê²½ìš° ë°œìƒ
- í•´ê²°: ë°ì´í„° ì „ì²˜ë¦¬ í™•ì¸ ë˜ëŠ” í”¼ì²˜ ì„ íƒ ê¸°ì¤€ ì™„í™”

### "ìµœì  kë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ" ì˜¤ë¥˜

- ìƒ˜í”Œ ìˆ˜ê°€ ë„ˆë¬´ ì ê±°ë‚˜ í´ëŸ¬ìŠ¤í„° í¬ê¸° ì œì•½ ìœ„ë°˜
- í•´ê²°: ê²€ìƒ‰ ì¡°ê±´ ì™„í™” ë˜ëŠ” ìµœì†Œ í´ëŸ¬ìŠ¤í„° í¬ê¸° ì¡°ì •

## ğŸ“š ì¶”ê°€ ì •ë³´

- ìƒì„¸ ì‚¬ìš©ë²•: `server/app/clustering/README.md`
- API ë¬¸ì„œ: `http://127.0.0.1:8004/docs`




